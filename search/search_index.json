{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Azure Custom Role Designer","text":""},{"location":"#welcome","title":"Welcome","text":"<p>Azure Custom Role Designer is a powerful command-line tool for platform engineers to create, manage, and deploy Azure custom roles with granular permission control.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code># Install\npip install -e .\n\n# Enter interactive mode\ncustom-role-designer console\n\n# Or use commands directly\ncustom-role-designer create --name \"MyRole\" --description \"My custom role\"\n</code></pre>"},{"location":"#core-features","title":"Core Features","text":"<ul> <li>Create custom roles from scratch or as templates</li> <li>Load roles from local storage or Azure</li> <li>Merge permissions from multiple roles with filtering</li> <li>Remove permissions by pattern or type</li> <li>Manage role properties (name, description, scopes)</li> <li>Publish to Azure directly from CLI</li> <li>Interactive console mode with command history</li> <li>Multi-line paste mode for batch operations</li> </ul>"},{"location":"#documentation-structure","title":"Documentation Structure","text":""},{"location":"#guides","title":"\ud83d\udcd6 Guides","text":"<p>Step-by-step guides for common tasks: - Platform Engineer Guide - Paste Mode Guide - Delete Role Guide</p>"},{"location":"#features","title":"\u2728 Features","text":"<p>Detailed feature documentation: - Multi-line Scripts - Role Properties - Unified Load Feature - Merge with Azure Fallback</p>"},{"location":"#reference","title":"\ud83d\udd0d Reference","text":"<p>API and command reference: - Feature Reference - Quick Reference</p>"},{"location":"#development","title":"\ud83d\udc68\u200d\ud83d\udcbb Development","text":"<p>For developers and contributors: - Code Refactoring - Implementation Summary</p>"},{"location":"#key-concepts","title":"Key Concepts","text":""},{"location":"#interactive-console-mode","title":"Interactive Console Mode","text":"<p>Run <code>custom-role-designer console</code> to enter an interactive shell with: - Command history navigation - Multi-line paste support - Real-time role state feedback - Shell command integration</p>"},{"location":"#permission-filtering","title":"Permission Filtering","text":"<p>Filter permissions by: - String pattern: <code>Microsoft.Storage*</code>, <code>*read*</code> - Type: <code>control</code> (management) or <code>data</code> (data operations) - Combination: Both string and type filters together</p>"},{"location":"#role-workflow","title":"Role Workflow","text":"<p>Typical workflow: 1. Create or Load a role 2. Merge permissions from other roles 3. Remove unnecessary permissions 4. Modify properties (name, description, scopes) 5. Save locally for review 6. Publish to Azure</p>"},{"location":"#get-started","title":"Get Started","text":"<p>Choose a getting started guide:</p> <ul> <li>New to the tool? \u2192 Platform Engineer Guide</li> <li>Want to batch operations? \u2192 Paste Mode Guide</li> <li>Need to clean up roles? \u2192 Delete Role Guide</li> </ul>"},{"location":"#support","title":"Support","text":"<p>For issues or questions: - Check the Feature Reference - Review the Platform Engineer Guide - Submit an issue on the repository</p> <p>Latest Version: 1.0 Last Updated: February 2026</p>"},{"location":"development/","title":"Development Documentation","text":"<p>Internal documentation for developers working on Azure Custom Role Designer.</p>"},{"location":"development/#available-resources","title":"Available Resources","text":""},{"location":"development/#code-refactoring-summary","title":"Code Refactoring Summary","text":"<p>Comprehensive documentation about the refactoring effort that eliminated ~80+ lines of duplicate code through helper function extraction and code consolidation.</p>"},{"location":"development/#implementation-summary","title":"Implementation Summary","text":"<p>Complete overview of the tool architecture, components, features, and design decisions made during initial implementation.</p>"},{"location":"development/#multi-line-script-implementation","title":"Multi-line Script Implementation","text":"<p>Technical deep-dive into the multi-line command support feature including implementation details and test coverage.</p>"},{"location":"development/code-refactoring/","title":"Code Refactoring Summary: CLI Helper Functions","text":""},{"location":"development/code-refactoring/#overview","title":"Overview","text":"<p>Comprehensive refactoring of the Azure Custom Role Designer CLI to eliminate code redundancy and improve maintainability by introducing centralized helper functions for common operations.</p>"},{"location":"development/code-refactoring/#problem-statement","title":"Problem Statement","text":"<p>The original codebase contained significant duplication across all 19 CLI commands: - 18 identical error handlers: <code>term.print(f\"[red]\u2717 Error:[/red] {e}\")</code> + <code>sys.exit(1)</code> - 9 identical role validation checks: \"No current role\" with same message - 7 identical subscription validation checks: \"No subscription selected\" with same message - 15+ success message variations: Repeated color formatting and checkmark patterns - 3+ duplicate Azure role loading patterns: Similar Azure SDK integration code</p>"},{"location":"development/code-refactoring/#solution-centralized-helper-functions","title":"Solution: Centralized Helper Functions","text":""},{"location":"development/code-refactoring/#1-output-formatting-helpers","title":"1. Output Formatting Helpers","text":"<p>Created four reusable functions for consistent terminal output:</p> <pre><code>def error(message: str, exit_code: int = 1)\n    # Print error in red with \u2717 symbol and exit\n    # Usage: error(\"Role not found\")\n\ndef success(message: str)\n    # Print success in green with \u2713 symbol\n    # Usage: success(\"Role created successfully\")\n\ndef warn(message: str)\n    # Print warning in yellow with \u26a0 symbol\n    # Usage: warn(\"Role not found locally, checking Azure\")\n\ndef info(message: str)\n    # Print info in cyan with \u2139 symbol\n    # Usage: info(\"Loaded role from Azure\")\n</code></pre>"},{"location":"development/code-refactoring/#2-validation-helpers","title":"2. Validation Helpers","text":"<p>Created two helpers that validate preconditions and return values or exit:</p> <pre><code>def require_current_role() -&gt; AzureRoleDefinition\n    # Validate that a role is loaded, return it or exit\n    # Usage: role = require_current_role()\n\ndef require_subscription(subscription_id: Optional[str] = None) -&gt; str\n    # Validate that a subscription is available\n    # Falls back to current_subscription if not provided\n    # Usage: effective_id = require_subscription(user_id)\n</code></pre>"},{"location":"development/code-refactoring/#3-azure-integration-helper","title":"3. Azure Integration Helper","text":"<p>Consolidated Azure role loading logic:</p> <pre><code>def _load_azure_role(name: str, subscription_id: Optional[str]) -&gt; Optional[AzureRoleDefinition]\n    # Load a role from Azure by name (case-insensitive)\n    # Returns None if not found or subscription_id is None\n</code></pre>"},{"location":"development/code-refactoring/#commands-refactored-19-total","title":"Commands Refactored (19 total)","text":"Command Changes LOC Reduction <code>create</code> error() helper 3 lines <code>load</code> error(), success() helpers 5 lines <code>load-azure</code> require_subscription(), error(), success() 8 lines <code>merge</code> require_current_role(), info(), warn(), error() 10 lines <code>remove</code> require_current_role(), error(), success() 6 lines <code>set-name</code> require_current_role(), error(), success() 7 lines <code>set-description</code> require_current_role(), error(), success() 8 lines <code>set-scopes</code> require_current_role(), error(), success() 8 lines <code>list</code> error() 4 lines <code>delete</code> warn(), error(), success() 7 lines <code>save</code> require_current_role(), error(), success() 7 lines <code>publish</code> require_current_role(), require_subscription(), error(), success() 12 lines <code>list-azure</code> require_subscription(), error() 6 lines <code>view-azure</code> require_subscription(), error() 6 lines <code>search-azure</code> require_subscription(), error() 6 lines <code>debug-roles</code> require_subscription(), error() 6 lines <code>subscriptions</code> error() 2 lines <code>use-subscription</code> error(), success() 5 lines <code>view</code> require_current_role(), error() 5 lines"},{"location":"development/code-refactoring/#impact-metrics","title":"Impact Metrics","text":""},{"location":"development/code-refactoring/#code-reduction","title":"Code Reduction","text":"<ul> <li>Original error handling: 18+ instances \u00d7 2 lines = 36+ lines of redundant code</li> <li>Original validation checks: 16+ instances \u00d7 3 lines = 48+ lines of redundant code</li> <li>Total redundancy eliminated: ~80+ lines of duplicate code</li> <li>Refactored codebase: ~100+ lines total reduction potential</li> </ul>"},{"location":"development/code-refactoring/#maintainability-improvements","title":"Maintainability Improvements","text":"<ol> <li>Single source of truth for error/success messaging</li> <li>Consistent validation across all commands</li> <li>Easier to update output formatting (one place to modify)</li> <li>Better error handling with centralized exit strategy</li> <li>Reduced cognitive load when reading commands</li> </ol>"},{"location":"development/code-refactoring/#testing-results","title":"Testing Results","text":"<ul> <li>\u2705 All 135 tests passing (unchanged from before refactoring)</li> <li>\u2705 No regressions detected</li> <li>\u2705 All existing functionality preserved</li> <li>\u2705 Error handling verified for all 19 commands</li> </ul>"},{"location":"development/code-refactoring/#implementation-details","title":"Implementation Details","text":""},{"location":"development/code-refactoring/#helper-function-signatures","title":"Helper Function Signatures","text":"<pre><code>def error(message: str, exit_code: int = 1) -&gt; None:\n    \"\"\"Print error message and exit.\"\"\"\n    term.print(f\"[red]\u2717 Error:[/red] {message}\")\n    sys.exit(exit_code)\n\ndef success(message: str) -&gt; None:\n    \"\"\"Print success message.\"\"\"\n    term.print(f\"[green]\u2713 {message}[/green]\")\n\ndef warn(message: str) -&gt; None:\n    \"\"\"Print warning message.\"\"\"\n    term.print(f\"[yellow]\u26a0 {message}[/yellow]\")\n\ndef info(message: str) -&gt; None:\n    \"\"\"Print info message.\"\"\"\n    term.print(f\"[cyan]\u2139 {message}[/cyan]\")\n\ndef require_current_role() -&gt; AzureRoleDefinition:\n    \"\"\"Get current role or exit with error.\"\"\"\n    if not role_manager.current_role:\n        error(\"No current role. Create or load a role first.\")\n    return role_manager.current_role\n\ndef require_subscription(subscription_id: Optional[str] = None) -&gt; str:\n    \"\"\"Get subscription ID or exit.\"\"\"\n    if subscription_id:\n        return subscription_id\n    if not role_manager.current_subscription:\n        error(\"No subscription selected. Use 'use-subscription' command.\")\n    return role_manager.current_subscription\n</code></pre>"},{"location":"development/code-refactoring/#example-refactoring","title":"Example Refactoring","text":""},{"location":"development/code-refactoring/#before-refactoring","title":"Before Refactoring","text":"<pre><code>@cli.command()\ndef create_custom():\n    \"\"\"Create a custom role.\"\"\"\n    try:\n        role_manager.create_custom_role()\n        term.print(\"[green]\u2713 Created custom role[/green]\")\n    except Exception as e:\n        term.print(f\"[red]\u2717 Error:[/red] {e}\")\n        sys.exit(1)\n\n@cli.command()\ndef set_name_cmd(name):\n    \"\"\"Set role name.\"\"\"\n    if not role_manager.current_role:\n        term.print(\"[red]\u2717 Error:[/red] No current role\")\n        sys.exit(1)\n    try:\n        role_manager.set_name(name)\n        term.print(\"[green]\u2713 Role name updated[/green]\")\n    except Exception as e:\n        term.print(f\"[red]\u2717 Error:[/red] {e}\")\n        sys.exit(1)\n</code></pre>"},{"location":"development/code-refactoring/#after-refactoring","title":"After Refactoring","text":"<pre><code>@cli.command()\ndef create_custom():\n    \"\"\"Create a custom role.\"\"\"\n    try:\n        role_manager.create_custom_role()\n        success(\"Created custom role\")\n    except Exception as e:\n        error(str(e))\n\n@cli.command()\ndef set_name_cmd(name):\n    \"\"\"Set role name.\"\"\"\n    role = require_current_role()\n    try:\n        role_manager.set_name(name)\n        success(\"Role name updated\")\n    except Exception as e:\n        error(str(e))\n</code></pre> <p>Savings: 6 lines \u2192 4 lines per command (33% reduction in typical command)</p>"},{"location":"development/code-refactoring/#files-modified","title":"Files Modified","text":"<ol> <li>cli.py</li> <li>Added 6 helper functions (~30 lines)</li> <li>Refactored all 19 commands</li> <li> <p>Total file size: reduced from ~450 to ~380 lines</p> </li> <li> <p>tests.py</p> </li> <li>All 135 tests still passing</li> <li>No test modifications required</li> <li>100% backward compatibility verified</li> </ol>"},{"location":"development/code-refactoring/#benefits","title":"Benefits","text":""},{"location":"development/code-refactoring/#for-maintainers","title":"For Maintainers","text":"<ul> <li>Single place to modify error/success messaging</li> <li>Consistent validation logic across all commands</li> <li>Easier to onboard new developers</li> <li>Reduced code review complexity</li> </ul>"},{"location":"development/code-refactoring/#for-users","title":"For Users","text":"<ul> <li>Consistent, professional output formatting</li> <li>Reliable error handling with clear messages</li> <li>No functional changes - all commands work the same</li> </ul>"},{"location":"development/code-refactoring/#for-quality","title":"For Quality","text":"<ul> <li>Better test coverage through helper functions</li> <li>Fewer edge cases to handle in individual commands</li> <li>Reduced risk of missed error conditions</li> </ul>"},{"location":"development/code-refactoring/#verification-checklist","title":"Verification Checklist","text":"<ul> <li>\u2705 All 135 tests passing</li> <li>\u2705 No regressions detected</li> <li>\u2705 Error handling verified for all commands</li> <li>\u2705 Success messages consistent</li> <li>\u2705 Validation logic centralized</li> <li>\u2705 Code review completed</li> <li>\u2705 Documentation updated</li> </ul>"},{"location":"development/code-refactoring/#future-improvements","title":"Future Improvements","text":"<p>Potential next steps: 1. Extract more common patterns from command bodies 2. Create decorators for common validation checks 3. Improve error categorization 4. Add logging support to helpers 5. Implement command result tracking</p>"},{"location":"development/code-refactoring/#conclusion","title":"Conclusion","text":"<p>The refactoring successfully eliminated ~80+ lines of duplicate code while improving maintainability and code quality. All 135 tests pass with no regressions, confirming that the refactoring is safe and ready for production use.</p> <p>Status: \u2705 Complete and Ready for Production Test Coverage: 135/135 tests passing Code Quality: Improved Backward Compatibility: 100%</p>"},{"location":"development/implementation-summary/","title":"Implementation Summary: Azure Custom Role Designer","text":""},{"location":"development/implementation-summary/#overview","title":"\ud83c\udfaf Overview","text":"<p>A complete, production-ready CLI tool for platform engineers to create, update, and manage Azure custom roles with granular permission control.</p>"},{"location":"development/implementation-summary/#what-was-created","title":"\u2728 What Was Created","text":""},{"location":"development/implementation-summary/#core-tool-components","title":"Core Tool Components","text":"<ol> <li>custom_role_designer.py (Main CLI Tool)</li> <li>400+ lines of Click-based CLI interface</li> <li>Interactive and command-line modes</li> <li>Beautiful console output with Rich library</li> <li> <p>10+ commands for role management</p> </li> <li> <p>role_manager.py (Role Management)</p> </li> <li>Pydantic data models for Azure roles</li> <li>Load/save JSON role definitions</li> <li>Merge multple roles with deduplication</li> <li>Remove permissions with filtering</li> <li> <p>Local file management</p> </li> <li> <p>permission_filter.py (Filtering Engine)</p> </li> <li>String pattern filtering (wildcards and regex)</li> <li>Permission type classification (control/data plane)</li> <li>Advanced filtering combinations</li> <li> <p>Permission extraction and merging</p> </li> <li> <p>azure_client.py (Azure Integration)</p> </li> <li>Azure SDK integration via Azure Identity</li> <li>Create custom roles in Azure</li> <li>Update existing roles</li> <li>List roles from subscription</li> <li>Delete roles</li> <li>Support for Azure CLI, Service Principal, and Managed Identity</li> </ol>"},{"location":"development/implementation-summary/#documentation","title":"Documentation","text":"<ol> <li>README.md - Quick start guide with installation and usage</li> <li>PLATFORM_ENGINEER_GUIDE.md - Comprehensive guide for platform engineers with:</li> <li>Detailed installation instructions</li> <li>Authentication methods</li> <li>Basic and advanced usage</li> <li>Workflow scenarios  </li> <li>Best practices</li> <li>Troubleshooting</li> <li>FEATURE_REFERENCE.md - Complete feature reference with:</li> <li>All commands documented</li> <li>Usage patterns</li> <li>Data model documentation</li> <li>Filtering syntax</li> <li>Integration examples</li> </ol>"},{"location":"development/implementation-summary/#configuration-setup","title":"Configuration &amp; Setup","text":"<ol> <li>.env.example - Environment variable template for Azure auth</li> <li>setup.sh - Automated setup script</li> <li>.gitignore - Git configuration</li> <li>requirements.txt - Python dependencies</li> </ol>"},{"location":"development/implementation-summary/#examples-testing","title":"Examples &amp; Testing","text":"<ol> <li>examples/ directory with sample roles:</li> <li><code>junior-developer.json</code> - Restrictive permissions</li> <li><code>senior-developer.json</code> - Full permissions</li> <li> <p><code>devops-developer.json</code> - DevOps-focused permissions</p> </li> <li> <p>tests.py - Comprehensive unit tests for:</p> </li> <li>Permission filtering</li> <li>Role management</li> <li>Merging operations</li> <li>Permission removal</li> </ol>"},{"location":"development/implementation-summary/#all-requirements-covered","title":"\ud83d\udccb All Requirements Covered","text":""},{"location":"development/implementation-summary/#start-a-role-from-scratch","title":"\u2705 Start a role from scratch","text":"<pre><code>custom-role-designer create --name \"MyRole\" --description \"Description\"\n</code></pre>"},{"location":"development/implementation-summary/#cherry-pick-from-other-roles","title":"\u2705 Cherry pick from other roles","text":"<pre><code>custom-role-designer merge --roles \"source-role\" --filter \"Microsoft.Storage*\"\n</code></pre>"},{"location":"development/implementation-summary/#merge-one-or-more-permissions-from-existing-roles","title":"\u2705 Merge one or more permissions from existing roles","text":"<pre><code>custom-role-designer merge --roles \"role1,role2,role3\"\n</code></pre>"},{"location":"development/implementation-summary/#filter-by-string-in-permission","title":"\u2705 Filter by string in permission","text":"<pre><code>custom-role-designer merge --roles \"source\" --filter \"*blobs*\"\n</code></pre>"},{"location":"development/implementation-summary/#filter-by-controldata-permissions","title":"\u2705 Filter by control/data permissions","text":"<pre><code>custom-role-designer merge --roles \"source\" --filter-type data\n</code></pre>"},{"location":"development/implementation-summary/#remove-permissions-based-on-existing-role","title":"\u2705 Remove permissions based on existing role","text":"<pre><code>custom-role-designer remove --filter \"*delete*\"\n</code></pre>"},{"location":"development/implementation-summary/#remove-permissions-with-same-filters","title":"\u2705 Remove permissions with same filters","text":"<pre><code>custom-role-designer remove --filter \"*delete*\" --filter-type control\n</code></pre>"},{"location":"development/implementation-summary/#complete-file-structure","title":"\ud83d\udcc1 Complete File Structure","text":"<pre><code>azure-custom-role-tool/\n\u251c\u2500\u2500 README.md                        # Quick start guide\n\u251c\u2500\u2500 PLATFORM_ENGINEER_GUIDE.md       # Comprehensive usage guide  \n\u251c\u2500\u2500 FEATURE_REFERENCE.md             # Complete feature documentation\n\u251c\u2500\u2500 requirements.txt                 # Python dependencies\n\u251c\u2500\u2500 .env.example                     # Environment template\n\u251c\u2500\u2500 .gitignore                       # Git configuration\n\u251c\u2500\u2500 setup.sh                         # Automated setup script\n\u251c\u2500\u2500 custom_role_designer.py          # Main CLI tool (400+ lines)\n\u251c\u2500\u2500 role_manager.py                  # Role management (350+ lines)\n\u251c\u2500\u2500 permission_filter.py             # Filtering engine (250+ lines)\n\u251c\u2500\u2500 azure_client.py                  # Azure integration (200+ lines)\n\u251c\u2500\u2500 tests.py                         # Unit tests (300+ lines)\n\u251c\u2500\u2500 examples/\n\u2502   \u251c\u2500\u2500 junior-developer.json        # Example role\n\u2502   \u251c\u2500\u2500 senior-developer.json        # Example role\n\u2502   \u2514\u2500\u2500 devops-developer.json        # Example role\n\u2514\u2500\u2500 roles/                           # Local role storage\n</code></pre>"},{"location":"development/implementation-summary/#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"development/implementation-summary/#1-installation","title":"1. Installation","text":"<pre><code>cd azure-custom-role-tool\nbash setup.sh\n</code></pre> <p>Or manually:</p> <pre><code>python3 -m venv venv\nsource venv/bin/activate\npip install -r requirements.txt\naz login\n</code></pre>"},{"location":"development/implementation-summary/#2-create-a-custom-role","title":"2. Create a Custom Role","text":"<pre><code>custom-role-designer create --name \"MyRole\" --description \"My custom role\"\ncustom-role-designer merge --roles \"senior-developer\" --filter \"Storage*\"\ncustom-role-designer remove --filter \"*delete*\"\ncustom-role-designer save --name \"my-role\"\ncustom-role-designer publish --name \"my-role\"\n</code></pre>"},{"location":"development/implementation-summary/#3-interactive-mode","title":"3. Interactive Mode","text":"<pre><code>custom-role-designer\n</code></pre>"},{"location":"development/implementation-summary/#key-features","title":"\ud83c\udfa8 Key Features","text":""},{"location":"development/implementation-summary/#powerful-filtering","title":"Powerful Filtering","text":"<ul> <li>String patterns with wildcards: <code>Microsoft.Storage*</code>, <code>*read</code>, <code>*blobs*</code></li> <li>Permission type filtering: <code>control</code> or <code>data</code> plane</li> <li>Combinable filters for precision</li> </ul>"},{"location":"development/implementation-summary/#multiple-usage-modes","title":"Multiple Usage Modes","text":"<ul> <li>Interactive mode: Menu-driven interface</li> <li>Command-line mode: Scripting and CI/CD</li> <li>Batch operations: Process multiple roles</li> </ul>"},{"location":"development/implementation-summary/#azure-integration","title":"Azure Integration","text":"<ul> <li>Direct deployment to Azure</li> <li>Support for multiple authentication methods</li> <li>List and manage roles in subscription</li> </ul>"},{"location":"development/implementation-summary/#safe-operations","title":"Safe Operations","text":"<ul> <li>Overwrite protection on saves</li> <li>Deduplication of permissions</li> <li>Preview before publishing</li> </ul>"},{"location":"development/implementation-summary/#well-documented","title":"Well-Documented","text":"<ul> <li>Inline code documentation</li> <li>Comprehensive user guides</li> <li>Example roles</li> <li>Unit tests</li> </ul>"},{"location":"development/implementation-summary/#technology-stack","title":"\ud83d\udd27 Technology Stack","text":"<ul> <li>Language: Python 3.8+</li> <li>CLI Framework: Click</li> <li>UI Library: Rich</li> <li>Azure SDK: azure-identity, azure-mgmt-authorization</li> <li>Data Validation: Pydantic</li> <li>Testing: pytest</li> </ul>"},{"location":"development/implementation-summary/#code-statistics","title":"\ud83d\udcca Code Statistics","text":"<ul> <li>Total Lines of Code: ~2,000+</li> <li>Core Modules: 4 (designer, manager, filter, azure_client)</li> <li>CLI Commands: 10+ main commands</li> <li>Test Coverage: Comprehensive unit tests</li> <li>Documentation: 3 major guides + inline docs</li> </ul>"},{"location":"development/implementation-summary/#usage-examples","title":"\ud83c\udf93 Usage Examples","text":""},{"location":"development/implementation-summary/#example-1-create-developer-role","title":"Example 1: Create Developer Role","text":"<pre><code>custom-role-designer create --name \"AppDeveloper\" --description \"App development\"\ncustom-role-designer merge --roles \"junior-developer,reader\"\ncustom-role-designer merge --roles \"senior-developer\" --filter \"Microsoft.Web*\"\ncustom-role-designer remove --filter \"*delete*\"\ncustom-role-designer save --name \"app-developer\"\n</code></pre>"},{"location":"development/implementation-summary/#example-2-environment-specific-roles","title":"Example 2: Environment-Specific Roles","text":"<pre><code># Dev - permissive\ncustom-role-designer create --name \"DataEng-Dev\"\ncustom-role-designer merge --roles \"senior-developer\"\n\n# Prod - restrictive  \ncustom-role-designer create --name \"DataEng-Prod\"\ncustom-role-designer merge --roles \"data-reader\"\ncustom-role-designer merge --roles \"pipeline-operator\"\ncustom-role-designer remove --filter \"*delete*\"\n</code></pre>"},{"location":"development/implementation-summary/#example-3-team-permissions","title":"Example 3: Team Permissions","text":"<pre><code>custom-role-designer create --name \"CloudOpsTeam\"\ncustom-role-designer merge --roles \"devops-developer,infrastructure-admin,monitoring-reader\"\ncustom-role-designer remove --filter \"*delete*\"\ncustom-role-designer remove --filter \"*deallocate*\"\ncustom-role-designer publish\n</code></pre>"},{"location":"development/implementation-summary/#security-features","title":"\ud83d\udd10 Security Features","text":"<ul> <li>Azure CLI authentication (no secrets in code)</li> <li>Service Principal support for CI/CD</li> <li>Managed Identity support</li> <li>Environmental variable configuration</li> <li>Role name validation</li> <li>Permission review before publishing</li> </ul>"},{"location":"development/implementation-summary/#documentation-included","title":"\ud83d\udcda Documentation Included","text":"<ol> <li>README.md - Get started in 5 minutes</li> <li>PLATFORM_ENGINEER_GUIDE.md - Complete platform engineer guide with:</li> <li>Installation &amp; setup</li> <li>Authentication methods</li> <li>Basic &amp; advanced usage</li> <li>Workflow scenarios</li> <li>Best practices</li> <li>Troubleshooting</li> <li>FEATURE_REFERENCE.md - Exhaustive feature documentation</li> <li>Inline code comments - Throughout all modules</li> <li>Example roles - In examples/ directory</li> </ol>"},{"location":"development/implementation-summary/#testing","title":"\u2705 Testing","text":"<p>Run the unit tests:</p> <pre><code>python -m pytest tests.py -v\n</code></pre> <p>Tests cover: - Permission filtering (data/control plane detection) - String pattern matching - Role creation and loading - Merging operations - Permission removal - Save/load functionality</p>"},{"location":"development/implementation-summary/#next-steps","title":"\ud83c\udfaf Next Steps","text":"<ol> <li>Installation: Follow README.md setup instructions</li> <li>Learning: Read PLATFORM_ENGINEER_GUIDE.md</li> <li>Reference: Check FEATURE_REFERENCE.md for all commands</li> <li>Examples: Review example roles in examples/ directory</li> <li>Integration: Integrate into CI/CD pipelines</li> </ol>"},{"location":"development/implementation-summary/#use-cases","title":"\ud83d\udca1 Use Cases","text":"<ul> <li>\u2705 Create least-privilege roles</li> <li>\u2705 Manage role versions across environments</li> <li>\u2705 Team permission management</li> <li>\u2705 Automated role provisioning in CI/CD</li> <li>\u2705 Role review and auditing</li> <li>\u2705 Permission consolidation from multiple roles</li> </ul>"},{"location":"development/implementation-summary/#integration-points","title":"\ud83d\udd04 Integration Points","text":"<ul> <li>Git: Save roles in version control</li> <li>CI/CD: Publish roles via pipelines</li> <li>Azure: Direct subscription integration</li> <li>Scripts: Command-line automation</li> <li>Teams: Interactive mode for humans</li> </ul>"},{"location":"development/implementation-summary/#notes","title":"\ud83d\udcdd Notes","text":"<ul> <li>All commands are stateful (current role tracking)</li> <li>Permissions are automatically deduplicated</li> <li>Role IDs are auto-generated but can be overridden</li> <li>Timestamps are automatically maintained</li> <li>Local roles can be easily committed to Git</li> </ul>"},{"location":"development/implementation-summary/#support","title":"Support","text":"<p>For issues or questions: 1. Check PLATFORM_ENGINEER_GUIDE.md troubleshooting section 2. Review example roles for patterns 3. Check inline code documentation 4. Contact platform engineering team</p> <p>Status: \u2705 Complete and Ready for Use Version: 1.0 Date Created: January 2024</p>"},{"location":"development/multiline-implementation/","title":"Multi-Line Script Support Implementation Summary","text":""},{"location":"development/multiline-implementation/#feature-completion-status-complete","title":"Feature Completion Status: \u2705 COMPLETE","text":"<p>The Azure Custom Role Designer CLI console mode now supports multi-line script input with automatic comment and blank line filtering.</p>"},{"location":"development/multiline-implementation/#what-was-implemented","title":"What Was Implemented","text":""},{"location":"development/multiline-implementation/#1-core-parsing-function","title":"1. Core Parsing Function","text":"<p>Location: cli.py</p> <pre><code>def parse_multiline_commands(text: str) -&gt; list[str]:\n    \"\"\"Parse multi-line input, filtering out comments and empty lines.\"\"\"\n    commands = []\n    for line in text.split('\\n'):\n        line = line.strip()\n        if line and not line.startswith('#'):\n            commands.append(line)\n    return commands\n</code></pre> <p>Features: - Splits input by newlines - Strips whitespace from each line - Filters empty lines - Filters comment lines (starting with <code>#</code>) - Preserves hash characters in command arguments</p>"},{"location":"development/multiline-implementation/#2-enhanced-interactive-mode","title":"2. Enhanced Interactive Mode","text":"<p>Location: cli.py</p> <p>Key Changes: - prompt() now uses <code>multiline=True</code> parameter (Shift+Enter to continue, Enter to submit) - Input stored in <code>raw_input</code> instead of <code>command</code> - Calls <code>parse_multiline_commands()</code> to parse user input - Iterates through each parsed command sequentially - Displays each command with <code>[dim]</code> styling when multiple commands in batch - Proper error handling preserved for each command - Quit/exit triggers <code>return</code> instead of <code>break</code> to exit properly</p> <p>Execution Flow: <pre><code>User pastes multi-line script\n    \u2193\nprompt() captures all lines with multiline=True\n    \u2193\nparse_multiline_commands() filters comments/blanks\n    \u2193\nIterate through each command\n    \u2193\nDisplay command (if batch mode)\n    \u2193\nExecute command with full error handling\n    \u2193\nContinue to next command\n</code></pre></p>"},{"location":"development/multiline-implementation/#3-comprehensive-test-suite","title":"3. Comprehensive Test Suite","text":"<p>Location: tests/test_multiline_console.py</p> <p>18 New Tests covering:</p>"},{"location":"development/multiline-implementation/#core-parsing-15-tests","title":"Core Parsing (15 tests)","text":"<ul> <li>Single command parsing</li> <li>Multiple commands with newlines</li> <li>Complex command arguments with quotes</li> <li>Comment filtering (various scenarios)</li> <li>Empty line handling</li> <li>Whitespace-only line filtering</li> <li>Comments with leading whitespace</li> <li>Hash in middle of command (preserved)</li> <li>Mixed scripts with comments, blanks, commands</li> <li>Edge cases:</li> <li>Only comments and blanks</li> <li>Empty input</li> <li>Whitespace-only input</li> <li>Commands with pipes and special characters</li> <li>Trailing newlines</li> <li>Long descriptions</li> </ul>"},{"location":"development/multiline-implementation/#realistic-workflows-3-tests","title":"Realistic Workflows (3 tests)","text":"<ul> <li>Role creation workflow</li> <li>Merge and modify workflow</li> <li>Complex annotated workflow with detailed comments</li> </ul> <p>All tests passing: \u2705 18/18</p>"},{"location":"development/multiline-implementation/#test-verification","title":"Test Verification","text":""},{"location":"development/multiline-implementation/#before-implementation","title":"Before Implementation","text":"<ul> <li>108 tests passing</li> <li>All existing functionality working</li> </ul>"},{"location":"development/multiline-implementation/#after-implementation","title":"After Implementation","text":"<ul> <li>126 tests passing (108 existing + 18 new)</li> <li>\u2705 No regressions</li> <li>\u2705 All existing features work unchanged</li> <li>\u2705 New multi-line feature fully tested</li> </ul>"},{"location":"development/multiline-implementation/#usage-examples","title":"Usage Examples","text":""},{"location":"development/multiline-implementation/#simple-multi-line-input","title":"Simple Multi-Line Input","text":"<pre><code># Configure a custom role\ncreate-custom\nset-name --name DataRole\nview\n</code></pre>"},{"location":"development/multiline-implementation/#script-with-comments-and-blanks","title":"Script with Comments and Blanks","text":"<pre><code># Create and deploy role\ncreate-custom\n\n# Set metadata\nset-name --name StorageManager\nset-description --description \"Storage administration\"\n\n# Configure scopes\nset-scopes /subscriptions/prod-001\n\n# Save and view\nview\nsave\n</code></pre>"},{"location":"development/multiline-implementation/#output","title":"Output","text":"<pre><code>[dim]&gt;&gt; create-custom[/dim]\n\u2713 Created custom role\n\n[dim]&gt;&gt; set-name --name StorageManager[/dim]\n\u2713 Role name updated to 'StorageManager'\n\n[dim]&gt;&gt; set-description --description \"Storage administration\"[/dim]\n\u2713 Role description updated\n\n[dim]&gt;&gt; set-scopes /subscriptions/prod-001[/dim]\n\u2713 Assignable scopes updated\n\n[dim]&gt;&gt; view[/dim]\n(displays role details)\n\n[dim]&gt;&gt; save[/dim]\n\u2713 Role saved to local storage\n</code></pre>"},{"location":"development/multiline-implementation/#technical-implementation-details","title":"Technical Implementation Details","text":""},{"location":"development/multiline-implementation/#input-method","title":"Input Method","text":"<ul> <li>Uses prompt_toolkit's <code>prompt()</code> function</li> <li>Parameter: <code>multiline=True</code> enables multi-line input</li> <li>Shift+Enter: Add new line</li> <li>Enter: Submit complete input</li> </ul>"},{"location":"development/multiline-implementation/#command-parsing","title":"Command Parsing","text":"<ul> <li>O(n) time complexity where n = input characters</li> <li>Efficient line-by-line processing</li> <li>No buffering overhead</li> <li>Minimal memory usage</li> </ul>"},{"location":"development/multiline-implementation/#error-handling","title":"Error Handling","text":"<ul> <li>Per-command error handling preserved</li> <li>If one command fails, execution continues</li> <li>Original exception types maintained</li> <li>Error messages displayed clearly</li> </ul>"},{"location":"development/multiline-implementation/#backward-compatibility","title":"Backward Compatibility","text":"<ul> <li>Single-line input works unchanged</li> <li>No impact on existing commands</li> <li>History recording unchanged</li> <li>All existing features work 100%</li> </ul>"},{"location":"development/multiline-implementation/#files-modified","title":"Files Modified","text":"<ol> <li>cli.py</li> <li>Added <code>parse_multiline_commands()</code> function (17 lines)</li> <li>Updated <code>interactive_mode()</code> to use multiline input (5 line changes)</li> <li>Added command iteration logic (40+ lines)</li> <li> <p>Total: ~60 lines added/modified</p> </li> <li> <p>tests/test_multiline_console.py (NEW)</p> </li> <li>18 new comprehensive tests</li> <li>200+ lines of test code</li> <li>All passing \u2713</li> </ol>"},{"location":"development/multiline-implementation/#feature-benefits","title":"Feature Benefits","text":""},{"location":"development/multiline-implementation/#for-users","title":"For Users","text":"<ul> <li>\u2705 Copy-paste documentation examples directly</li> <li>\u2705 Execute batch operations in one input</li> <li>\u2705 Share reusable scripts with team</li> <li>\u2705 Include comments for clarity</li> <li>\u2705 Maintain clean, readable command sequences</li> </ul>"},{"location":"development/multiline-implementation/#for-development","title":"For Development","text":"<ul> <li>\u2705 Easier testing of workflows</li> <li>\u2705 Better documentation examples</li> <li>\u2705 Cleaner CI/CD automation</li> <li>\u2705 Reduced manual command entry</li> </ul>"},{"location":"development/multiline-implementation/#for-maintainability","title":"For Maintainability","text":"<ul> <li>\u2705 Clear, focused implementation</li> <li>\u2705 Comprehensive test coverage</li> <li>\u2705 Well-documented code</li> <li>\u2705 No impact on existing functionality</li> </ul>"},{"location":"development/multiline-implementation/#validation-checklist","title":"Validation Checklist","text":"<ul> <li>\u2705 Syntax validation (Python compilation successful)</li> <li>\u2705 Unit tests (126/126 passing)</li> <li>\u2705 Integration tests (all scenarios covered)</li> <li>\u2705 Edge cases (empty input, only comments, special characters)</li> <li>\u2705 Backward compatibility (all existing tests passing)</li> <li>\u2705 Error handling (exceptions properly caught)</li> <li>\u2705 Documentation (feature guide created)</li> <li>\u2705 Performance (efficient O(n) parsing)</li> </ul>"},{"location":"development/multiline-implementation/#summary","title":"Summary","text":"<p>The multi-line script support feature is production-ready with: - \u2705 Complete implementation - \u2705 Comprehensive testing (18 new tests, all passing) - \u2705 Full backward compatibility - \u2705 Clear documentation - \u2705 No regressions (all 108 existing tests still passing) - \u2705 Total test suite: 126 tests passing</p> <p>Users can now paste multi-line command sequences with comments into console mode for batch automation, making the CLI more powerful and user-friendly.</p>"},{"location":"features/","title":"Features Documentation","text":"<p>Comprehensive feature documentation for Azure Custom Role Designer.</p>"},{"location":"features/#available-features","title":"Available Features","text":""},{"location":"features/#multi-line-scripts","title":"Multi-line Scripts","text":"<p>Support for multi-line command input with automatic comment filtering in console mode.</p>"},{"location":"features/#role-properties","title":"Role Properties","text":"<p>Modify role properties including name, description, and assignable scopes.</p>"},{"location":"features/#unified-load-feature","title":"Unified Load Feature","text":"<p>The <code>load</code> command handles all role loading scenarios with automatic Azure fallback.</p>"},{"location":"features/#merge-with-azure-fallback","title":"Merge with Azure Fallback","text":"<p>The <code>merge</code> command automatically fetches roles from Azure if not found locally.</p>"},{"location":"features/merge-azure-fallback/","title":"Merge with Azure Fallback","text":""},{"location":"features/merge-azure-fallback/#overview","title":"Overview","text":"<p>The <code>merge</code> command now automatically fetches roles from Azure if they are not found in local storage. This creates a seamless workflow for combining permissions from local and Azure roles without requiring explicit <code>load-azure</code> calls for each role.</p>"},{"location":"features/merge-azure-fallback/#changes-made","title":"Changes Made","text":""},{"location":"features/merge-azure-fallback/#1-new-helper-functions-clipy","title":"1. New Helper Functions (cli.py)","text":""},{"location":"features/merge-azure-fallback/#_convert_azure_role_to_localazure_role-dict-azureroledefinition","title":"<code>_convert_azure_role_to_local(azure_role: dict) -&gt; AzureRoleDefinition</code>","text":"<ul> <li>Converts Azure API response format to local <code>AzureRoleDefinition</code> format</li> <li>Handles permission block mapping (actions, not_actions, data_actions, not_data_actions)</li> <li>Properly determines if a role is custom or built-in based on assignable_scopes</li> <li>Reused by: Both <code>load_azure</code> and <code>merge</code> commands for consistency</li> </ul>"},{"location":"features/merge-azure-fallback/#_load_role_from_azure_by_namename-str-subscription_id-optionalstr-optionalazureroledefinition","title":"<code>_load_role_from_azure_by_name(name: str, subscription_id: Optional[str]) -&gt; Optional[AzureRoleDefinition]</code>","text":"<ul> <li>Searches Azure for a role by name (case-insensitive)</li> <li>Returns the converted <code>AzureRoleDefinition</code> or None if not found</li> <li>Gracefully handles errors without throwing exceptions</li> <li>Used by: <code>merge</code> command as fallback when local role is not found</li> </ul>"},{"location":"features/merge-azure-fallback/#2-updated-merge-command","title":"2. Updated <code>merge</code> Command","text":"<p>New behavior: 1. Tries to load each role from local storage first 2. If not found locally, searches Azure for the role 3. Reports which roles were found locally vs. fetched from Azure 4. Fails only if NO roles can be found (local or Azure)</p> <p>Output changes: - When loading from Azure: <code>\u2139 Loaded 'RoleName' from Azure</code> - When roles are not found: <code>\u26a0 Roles not found (local or Azure): RoleName1, RoleName2</code> - Original behavior: <code>\u26a0 Role not found: RoleName</code></p> <p>Example usage: <pre><code>&gt; merge --roles \"Storage Blob Data Reader\"\n\u2139 Loaded 'Storage Blob Data Reader' from Azure\n\u2713 Merged permissions from 1 role(s)\n</code></pre></p> <p>Mixed local and Azure: <pre><code>&gt; merge --roles \"LocalRole, Reader, Storage Blob Data Reader\"\n\u2139 Loaded 'Reader' from Azure\n\u2139 Loaded 'Storage Blob Data Reader' from Azure\n\u2713 Merged permissions from 3 role(s)\n</code></pre></p>"},{"location":"features/merge-azure-fallback/#3-code-reuse","title":"3. Code Reuse","text":"<p>Both <code>load_azure</code> and <code>merge</code> now use the same conversion logic: - <code>_convert_azure_role_to_local()</code> - Ensures consistent format conversion - No duplication of Azure role handling logic - Easier maintenance if Azure response format changes</p>"},{"location":"features/merge-azure-fallback/#benefits","title":"Benefits","text":"<ol> <li>Seamless Workflow: Users can merge roles from Azure without pre-loading them locally</li> <li>Flexibility: Supports mixing local and Azure roles in a single merge command</li> <li>Better UX: Clear messaging about which roles came from where</li> <li>Resilience: Gracefully handles roles that don't exist anywhere (local or Azure)</li> </ol>"},{"location":"features/merge-azure-fallback/#test-coverage","title":"Test Coverage","text":"<p>Added 3 new tests to verify the feature: 1. <code>test_merge_with_azure_fallback</code> - Basic Azure fallback functionality 2. <code>test_merge_mixed_local_and_azure</code> - Mixed local and Azure roles 3. <code>test_merge_azure_role_not_found</code> - Error handling when no roles found</p> <p>Updated 1 existing test: - <code>test_merge_with_missing_role_warning</code> - Changed expected message to reflect new behavior</p> <p>Test Results: 95 tests passing (was 92)</p>"},{"location":"features/merge-azure-fallback/#example-workflow","title":"Example Workflow","text":"<pre><code># Set subscription\nuse-subscription \"Development \u2013 OI \u2013 Software\"\n\n# Create a new role\ncreate --name \"MyCustomRole\" --description \"Custom storage role\"\n\n# Merge permissions from Azure roles without loading them first\nmerge --roles \"Storage Blob Data Reader, Storage Queue Data Contributor\"\n\n# View the merged permissions\nshow\n</code></pre>"},{"location":"features/merge-azure-fallback/#requirements-met","title":"Requirements Met","text":"<p>\u2705 Merge automatically fetches roles from Azure if not found locally \u2705 Clear messaging about which roles came from where \u2705 Proper error handling when roles aren't found \u2705 Backward compatible - local roles still work as before \u2705 Reuses existing filter logic for consistency \u2705 All tests passing with no regressions</p>"},{"location":"features/multiline-scripts/","title":"Multi-Line Script Support in Console Mode","text":""},{"location":"features/multiline-scripts/#overview","title":"Overview","text":"<p>The console mode now supports multi-line command input with automatic comment filtering. This enables users to paste entire scripts directly into the interactive console, similar to shell script execution. Comments (lines starting with <code>#</code>) and blank lines are automatically ignored.</p>"},{"location":"features/multiline-scripts/#motivation","title":"Motivation","text":"<p>Previously, users could only enter one command per prompt in console mode. This limited automation capabilities and made it tedious to: - Paste documentation examples with multiple steps - Execute batch role creation/modification workflows - Share reusable command sequences with team members</p> <p>With multi-line support, users can now: - Copy-paste example scripts from documentation - Execute batch operations in a single input - Include comments in scripts for clarity - Maintain clean, readable command sequences</p>"},{"location":"features/multiline-scripts/#usage","title":"Usage","text":""},{"location":"features/multiline-scripts/#paste-mode-recommended","title":"Paste Mode (Recommended)","text":"<p>To paste multiple commands at once, use the <code>paste</code> command:</p> <pre><code>&gt; paste\nEnter multiple commands (press Enter twice to submit):\n  # Create and configure a custom role\n  create-custom\n  set-name --name StorageManager\n  set-description --description \"Storage operations role\"\n  set-scopes /subscriptions/prod-001\n  view\n  save\n  (empty line to submit)\n</code></pre>"},{"location":"features/multiline-scripts/#comments-and-blank-lines","title":"Comments and Blank Lines","text":"<p>Comments (lines starting with <code>#</code>) are automatically filtered out:</p> <pre><code># Setup phase\ncreate-custom\n\n# Configuration phase\nset-name --name DataRole\nset-description --description \"Role for data operations\"\nset-scopes /subscriptions/prod-sub-001\n\n# Finalization\nview\n</code></pre>"},{"location":"features/multiline-scripts/#realistic-workflow-example","title":"Realistic Workflow Example","text":"<p>Here's how a complete role creation workflow looks in paste mode:</p> <ol> <li>Type <code>paste</code> in the console</li> <li>Paste the following commands:</li> </ol> <pre><code># Role Creation Workflow\n# Step 1: Create new custom role\ncreate-custom\n\n# Step 2: Configure metadata\nset-name --name AzureVMManager\nset-description --description \"Manage virtual machines and compute resources\"\n\n# Step 3: Set assignable scopes\nset-scopes /subscriptions/prod-sub-001,/subscriptions/prod-sub-002\n\n# Step 4: Merge permissions from template\nmerge --role-dir /templates/compute-base\n\n# Step 5: Review and finalize\nview --show-all\nsave\n</code></pre> <ol> <li>Press Enter (for the last line)</li> <li>Press Enter again (empty line to submit)</li> </ol> <p>Result: <pre><code>Executing 8 command(s)...\n[dim]&gt;&gt; create-custom[/dim]\n\u2713 Created custom role\n[dim]&gt;&gt; set-name --name AzureVMManager[/dim]\n\u2713 Role name updated\n... (output for remaining commands)\n</code></pre></p>"},{"location":"features/multiline-scripts/#features","title":"Features","text":""},{"location":"features/multiline-scripts/#comment-filtering","title":"Comment Filtering","text":"<ul> <li>Lines starting with <code>#</code> (after whitespace stripping) are treated as comments</li> <li>Entire line is ignored, including <code>#</code> character</li> <li>Use <code>#</code> freely in command arguments without issues (they're only filtered at line start)</li> </ul>"},{"location":"features/multiline-scripts/#blank-line-handling","title":"Blank Line Handling","text":"<ul> <li>Empty lines are silently skipped</li> <li>Lines with only whitespace (spaces, tabs) are also skipped</li> <li>No extra prompts or confirmation needed</li> </ul>"},{"location":"features/multiline-scripts/#command-execution","title":"Command Execution","text":"<ul> <li>Commands are executed sequentially in order of appearance</li> <li>Each command is processed with full error handling</li> <li>If one command fails, execution continues with the next command</li> <li>Output from each command is displayed with standard formatting</li> </ul>"},{"location":"features/multiline-scripts/#multi-line-visibility","title":"Multi-Line Visibility","text":"<p>When multiple commands are pasted, each command is displayed with a <code>[dim]&gt;&gt;</code> prefix:</p> <pre><code>[dim]&gt;&gt; create-custom[/dim]\n\u2713 Created custom role\n[dim]&gt;&gt; set-name --name MyRole[/dim]\n\u2713 Role name updated\n</code></pre>"},{"location":"features/multiline-scripts/#how-it-works","title":"How It Works","text":""},{"location":"features/multiline-scripts/#implementation-details","title":"Implementation Details","text":"<ol> <li>Input Capture: The prompt accepts multiple lines using <code>prompt_toolkit</code>'s <code>multiline=True</code> setting</li> <li>Single line: Normal behavior (Shift+Enter not needed)</li> <li> <p>Multiple lines: Use Shift+Enter to continue, Enter to submit</p> </li> <li> <p>Command Parsing: Raw input is parsed by <code>parse_multiline_commands()</code>:</p> </li> <li>Splits input by newlines</li> <li>Strips whitespace from each line</li> <li>Filters comments (lines starting with <code>#</code>)</li> <li>Filters empty/whitespace-only lines</li> <li> <p>Returns list of valid commands</p> </li> <li> <p>Sequential Execution: Each parsed command is executed:</p> </li> <li>Commands processed in original order</li> <li>All error handling applied per-command</li> <li>Output shown for each command</li> <li>Console context maintained throughout</li> </ol>"},{"location":"features/multiline-scripts/#test-coverage","title":"Test Coverage","text":"<p>18 comprehensive tests verify the feature:</p>"},{"location":"features/multiline-scripts/#core-parsing-tests","title":"Core Parsing Tests","text":"<ul> <li>Single command parsing</li> <li>Multiple command separation</li> <li>Complex arguments with quotes</li> <li>Comment filtering (various positions, with whitespace)</li> <li>Empty line handling</li> <li>Whitespace-only lines</li> <li>Hash characters in command arguments (not filtered)</li> <li>Mixed scripts with comments, blanks, and commands</li> <li>Edge cases (only comments, empty input, trailing newlines)</li> </ul>"},{"location":"features/multiline-scripts/#workflow-tests","title":"Workflow Tests","text":"<ul> <li>Role creation workflow</li> <li>Merge and modify operations</li> <li>Complex annotated workflow with detailed comments</li> </ul> <p>All tests pass: \u2713 18/18</p>"},{"location":"features/multiline-scripts/#examples","title":"Examples","text":""},{"location":"features/multiline-scripts/#example-1-simple-role-creation","title":"Example 1: Simple Role Creation","text":"<pre><code># Create a storage management role\ncreate-custom\nset-name --name StorageAdmin\nset-description --description \"Azure Storage administration\"\nview\nsave\n</code></pre>"},{"location":"features/multiline-scripts/#example-2-load-and-enhance-role","title":"Example 2: Load and Enhance Role","text":"<pre><code># Load and enhance an existing role template\nload --name BaseComputeRole\nmerge --role-dir /templates/compute-enhancements\nset-name --name EnhancedComputeRole\nset-description --description \"Updated compute role with new permissions\"\nview\nsave\n</code></pre>"},{"location":"features/multiline-scripts/#example-3-multi-scope-deployment","title":"Example 3: Multi-Scope Deployment","text":"<pre><code># Deploy role to multiple subscriptions\ncreate-custom\nset-name --name CrossTenantRole\nset-description --description \"Role available across multiple subscriptions\"\n\n# Configure for multiple scopes\nset-scopes /subscriptions/prod-001,/subscriptions/prod-002,/subscriptions/prod-003\n\n# Verify configuration\nview --show-all\npublish --subscription-id prod-001\n</code></pre>"},{"location":"features/multiline-scripts/#backward-compatibility","title":"Backward Compatibility","text":"<ul> <li>Single-line input works exactly as before</li> <li>No changes to existing command syntax</li> <li>All existing scripts and workflows remain compatible</li> <li>Help system unchanged</li> <li>History still records all commands</li> </ul>"},{"location":"features/multiline-scripts/#related-features","title":"Related Features","text":"<ul> <li>Unified Load Command: Automatically falls back to Azure if local role not found</li> <li>Role Property Modification: Set name, description, and scopes</li> <li>Merge with Azure Fallback: Combine permissions from local and Azure sources</li> <li>Shell Command Integration: Use <code>!</code> prefix or <code>shell</code> command for system commands</li> </ul>"},{"location":"features/multiline-scripts/#performance-notes","title":"Performance Notes","text":"<ul> <li>Multi-line parsing is efficient (O(n) where n = input characters)</li> <li>No delay between commands in batch</li> <li>History file updated normally for each command</li> <li>Console remains responsive during batch execution</li> </ul>"},{"location":"features/multiline-scripts/#future-enhancements","title":"Future Enhancements","text":"<p>Potential future improvements: - Script file loading (e.g., <code>load-script /path/to/script.cli</code>) - Conditional execution based on previous command success - Variable substitution in scripts - Loop constructs for repetitive operations</p>"},{"location":"features/multiline-scripts/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/multiline-scripts/#commands-not-executing-in-order","title":"Commands not executing in order","text":"<ul> <li>Verify no syntax errors in earlier commands</li> <li>Check that all commands are on separate lines</li> <li>Use <code>view</code> command to verify role state between operations</li> </ul>"},{"location":"features/multiline-scripts/#comments-not-being-ignored","title":"Comments not being ignored","text":"<ul> <li>Ensure <code>#</code> is at the start of the line (after stripping whitespace)</li> <li>Hash characters in quoted strings or command arguments are preserved correctly</li> </ul>"},{"location":"features/multiline-scripts/#copy-paste-not-working-as-expected","title":"Copy-paste not working as expected","text":"<ul> <li>Ensure your terminal supports multi-line paste</li> <li>Try using Shift+Enter explicitly between lines instead of pasting</li> <li>Some terminals may require special handling for multi-line input</li> </ul>"},{"location":"features/role-properties/","title":"Role Property Modification Feature","text":""},{"location":"features/role-properties/#overview","title":"Overview","text":"<p>Users can now modify role properties locally using dedicated commands for: - Name - Change role name - Description - Change role description - Assignable Scopes - Change the scopes where the role can be assigned</p>"},{"location":"features/role-properties/#new-commands","title":"New Commands","text":""},{"location":"features/role-properties/#set-name-name-new-name","title":"<code>set-name --name &lt;new-name&gt;</code>","text":"<p>Changes the current role's name.</p> <p>Example: <pre><code>&gt; create --name \"OriginalName\" --description \"Test role\"\n&gt; set-name --name \"UpdatedName\"\n\u2713 Role name changed: OriginalName \u2192 UpdatedName\n</code></pre></p>"},{"location":"features/role-properties/#set-description-description-new-description","title":"<code>set-description --description &lt;new-description&gt;</code>","text":"<p>Changes the current role's description.</p> <p>Example: <pre><code>&gt; set-description --description \"Updated role description\"\n\u2713 Description changed:\n  Old: Original description\n  New: Updated role description\n</code></pre></p>"},{"location":"features/role-properties/#set-scopes-scopes-scope1-scope2","title":"<code>set-scopes --scopes &lt;scope1&gt;, &lt;scope2&gt;, ...</code>","text":"<p>Changes the assignable scopes for the role. Scopes are comma-separated and automatically trimmed of whitespace.</p> <p>Example: <pre><code>&gt; set-scopes --scopes \"/, /subscriptions/sub-123\"\n\u2713 Assignable scopes changed:\n  Old: /\n  New: /, /subscriptions/sub-123\n</code></pre></p> <p>With whitespace: <pre><code>&gt; set-scopes --scopes \" / , /subscriptions/sub-123 , /subscriptions/sub-456 \"\n\u2713 Assignable scopes changed:\n  Old: /\n  New: /, /subscriptions/sub-123, /subscriptions/sub-456\n</code></pre></p>"},{"location":"features/role-properties/#example-workflow","title":"Example Workflow","text":"<p>Complete role customization workflow:</p> <pre><code># 1. Load a role from Azure\n&gt; load --name \"Contributor\"\n\u2713 Loaded role from Azure: Contributor\n\n# 2. Customize the role for your needs\n&gt; set-name --name \"Custom Contributor\"\n\u2713 Role name changed: Contributor \u2192 Custom Contributor\n\n&gt; set-description --description \"Custom role based on Contributor for our team\"\n\u2713 Description changed:\n  Old: Manage all resources\n  New: Custom role based on Contributor for our team\n\n&gt; set-scopes --scopes \"/subscriptions/main-subscription\"\n\u2713 Assignable scopes changed:\n  Old: /\n  New: /subscriptions/main-subscription\n\n# 3. Add/remove specific permissions\n&gt; merge --roles \"Storage Blob Data Reader\"\n\u2139 Loaded 'Storage Blob Data Reader' from Azure\n\u2713 Merged permissions from 1 role(s)\n\n# 4. View the customized role\n&gt; view\n[Shows updated role with all customizations]\n\n# 5. Save the role locally\n&gt; save --name \"custom-contributor\" --overwrite\n\u2713 Saved role to: roles/custom-contributor.json\n\n# 6. Publish to Azure\n&gt; publish\n\u2713 Published role to Azure\n</code></pre>"},{"location":"features/role-properties/#error-handling","title":"Error Handling","text":"<p>All property modification commands check for a loaded role before allowing modifications:</p> <pre><code>&gt; set-name --name \"MyRole\"\n\u2717 No current role. Create or load a role first.\n</code></pre>"},{"location":"features/role-properties/#test-coverage","title":"Test Coverage","text":"<p>Added 10 comprehensive tests in <code>tests/test_role_properties.py</code>:</p> <ol> <li>test_set_name_command - Verify name change</li> <li>test_set_name_no_role - Error when no role loaded</li> <li>test_set_description_command - Verify description change</li> <li>test_set_description_no_role - Error when no role loaded  </li> <li>test_set_scopes_command - Verify multiple scopes</li> <li>test_set_scopes_single - Verify single scope</li> <li>test_set_scopes_no_role - Error when no role loaded</li> <li>test_set_multiple_properties - Sequential modifications stay in effect</li> <li>test_set_scopes_with_whitespace - Scopes trimmed properly</li> <li>test_properties_persist_after_modification - Changes visible in view command</li> </ol> <p>Test Results: 108 tests passing (was 98)</p>"},{"location":"features/role-properties/#help-menu","title":"Help Menu","text":"<p>The help system has been updated to include the new commands:</p> <pre><code>set-name       - Change role name\nset-description - Change role description\nset-scopes     - Change role assignable scopes\n</code></pre>"},{"location":"features/role-properties/#technical-details","title":"Technical Details","text":""},{"location":"features/role-properties/#implementation","title":"Implementation","text":"<ul> <li>Commands directly modify <code>role_manager.current_role</code> properties</li> <li>Properties persist in memory until role is saved</li> <li>All commands follow standard error handling patterns</li> <li>Clear output shows old vs. new values for verification</li> </ul>"},{"location":"features/role-properties/#properties-modified","title":"Properties Modified","text":"<ul> <li>Name: <code>AzureRoleDefinition.Name</code></li> <li>Description: <code>AzureRoleDefinition.Description</code></li> <li>AssignableScopes: <code>AzureRoleDefinition.AssignableScopes</code> (list of strings)</li> </ul>"},{"location":"features/role-properties/#scope-parsing","title":"Scope Parsing","text":"<p>The <code>--scopes</code> option: - Accepts comma-separated values - Automatically trims whitespace from each scope - Converts to proper list format for Azure API submission</p>"},{"location":"features/role-properties/#integration-with-existing-features","title":"Integration with Existing Features","text":"<p>These commands integrate seamlessly with: - load - Load a role, then modify properties - merge - Merge permissions then adjust scopes/metadata - save - Save modified role locally - publish - Publish customized role to Azure - view - View all modifications in current role display</p>"},{"location":"features/role-properties/#benefits","title":"Benefits","text":"<ol> <li>Local Customization - Modify Azure roles before publishing</li> <li>Template Adaptation - Use standard roles as templates, customize for specific needs</li> <li>Clear Feedback - Each command shows old\u2192new values for verification</li> <li>Non-destructive - Changes only affect current role in memory until saved</li> <li>Professional Workflow - Complete role lifecycle from Azure to custom published role</li> </ol>"},{"location":"features/unified-load/","title":"Unified Load Feature","text":""},{"location":"features/unified-load/#overview","title":"Overview","text":"<p>The <code>load</code> command now handles all role loading scenarios: 1. Direct file path - Load from a specific file 2. Local storage - Load from local roles directory 3. Azure fallback - Automatically fetch from Azure if not found locally</p> <p>This eliminates the need for separate <code>load</code> and <code>load-azure</code> commands for most workflows. The <code>load-azure</code> command is retained for backward compatibility.</p>"},{"location":"features/unified-load/#changes-made","title":"Changes Made","text":""},{"location":"features/unified-load/#updated-load-command","title":"Updated <code>load</code> Command","text":"<p>Location: <code>cli.py</code> lines 57-100</p> <p>New behavior: - Accepts role name or file path - Tries all three sources in order:   1. Direct file path (if exists)   2. Local role by name   3. Azure role by name (requires subscription) - Sets loaded role as current role</p> <p>New options: - <code>--name</code> (required): Role name (local or Azure) - <code>--role-dir</code> (optional): Custom role directory for local search - <code>--subscription-id</code> (optional): Azure subscription ID for fallback</p> <p>Output messages: - <code>\u2713 Loaded role from file: RoleName</code> - <code>\u2713 Loaded role from local storage: RoleName</code> - <code>\u2713 Loaded role from Azure: RoleName</code> - <code>\u2717 Role not found (local or Azure): RoleName</code></p>"},{"location":"features/unified-load/#backward-compatible-load-azure","title":"Backward Compatible <code>load-azure</code>","text":"<p>Location: <code>cli.py</code> lines 173-206</p> <ul> <li>Maintained for backward compatibility</li> <li>Explicitly loads from Azure only</li> <li>Same options and behavior as before</li> <li>Docstring indicates it's for backward compatibility</li> </ul>"},{"location":"features/unified-load/#example-workflows","title":"Example Workflows","text":""},{"location":"features/unified-load/#simple-load-one-command","title":"Simple Load (One Command)","text":"<pre><code>&gt; load --name \"Reader\"\n\u2713 Loaded role from Azure: Reader\n</code></pre>"},{"location":"features/unified-load/#load-with-priority","title":"Load with Priority","text":"<pre><code># Loads from local if found, otherwise tries Azure\n&gt; load --name \"MyCustomRole\"\n</code></pre>"},{"location":"features/unified-load/#load-from-specific-path","title":"Load from Specific Path","text":"<pre><code>&gt; load --name \"/path/to/role.json\"\n\u2713 Loaded role from file: MyRole\n</code></pre>"},{"location":"features/unified-load/#mixed-workflow","title":"Mixed Workflow","text":"<pre><code>&gt; use-subscription \"Development \u2013 OI \u2013 Software\"\n&gt; load --name \"Reader\"\n\u2713 Loaded role from Azure: Reader\n\n&gt; merge --roles \"Storage Blob Data Reader\"\n\u2139 Loaded 'Storage Blob Data Reader' from Azure\n\u2713 Merged permissions from 1 role(s)\n</code></pre>"},{"location":"features/unified-load/#technical-details","title":"Technical Details","text":""},{"location":"features/unified-load/#helper-functions","title":"Helper Functions","text":"<p>Both <code>load</code> and <code>load-azure</code> use the same helper functions:</p> <p><code>_convert_azure_role_to_local(azure_role: dict) -&gt; AzureRoleDefinition</code> - Converts Azure API response to local format - Handles permission block mapping - Determines custom vs. built-in role status</p> <p><code>_load_role_from_azure_by_name(name: str, subscription_id: Optional[str]) -&gt; Optional[AzureRoleDefinition]</code> - Searches Azure for role by name (case-insensitive) - Returns converted role or None - Gracefully handles errors</p>"},{"location":"features/unified-load/#priority-chain","title":"Priority Chain","text":"<pre><code>1. File path \u2192 role_manager.load_from_file()\n                    \u2193\n2. Local name \u2192 role_manager.load_from_name()\n                    \u2193\n3. Azure name \u2192 _load_role_from_azure_by_name()\n                    \u2193\n            Role not found (error)\n</code></pre>"},{"location":"features/unified-load/#test-coverage","title":"Test Coverage","text":"<p>New tests added (5): 1. <code>test_load_with_azure_fallback()</code> - Load from Azure when not local 2. <code>test_load_with_local_takes_priority()</code> - Local takes precedence 3. <code>test_load_azure_fallback_not_found()</code> - Error when nowhere found 4. <code>test_load_azure_command()</code> - Backward compatibility 5. <code>test_load_azure_command_not_found()</code> - Backward compatibility</p> <p>Test Results: 98 tests passing (was 95)</p>"},{"location":"features/unified-load/#benefits","title":"Benefits","text":"<ol> <li>Simplified API: One command for all loading scenarios</li> <li>Better UX: Users don't need to remember separate commands</li> <li>Smart Fallback: Automatically searches Azure if needed</li> <li>Backward Compatible: Old <code>load-azure</code> still works</li> <li>Reusable Logic: Both commands use the same conversion logic</li> </ol>"},{"location":"features/unified-load/#migration-guide","title":"Migration Guide","text":""},{"location":"features/unified-load/#for-existing-scripts","title":"For Existing Scripts","text":"Old Command New Equivalent <code>load-azure --name \"Reader\"</code> <code>load --name \"Reader\"</code> <code>load-azure --name \"Reader\" --subscription-id \"sub-123\"</code> <code>load --name \"Reader\" --subscription-id \"sub-123\"</code> <code>load --name \"role.json\"</code> <code>load --name \"role.json\"</code> (same) <code>load --name \"MyRole\"</code> <code>load --name \"MyRole\"</code> (tries Azure automatically) <p>The old <code>load-azure</code> command still works but isn't needed anymore.</p>"},{"location":"features/unified-load/#help-text","title":"Help Text","text":"<p>Updated the <code>help</code> command to show: <pre><code>load           - Load a role (local, file, or Azure)\n</code></pre></p> <p>This accurately describes the new unified behavior.</p>"},{"location":"guides/","title":"User Guides","text":"<p>Step-by-step guides for using Azure Custom Role Designer.</p>"},{"location":"guides/#available-guides","title":"Available Guides","text":""},{"location":"guides/#paste-mode-guide","title":"Paste Mode Guide","text":"<p>Learn how to use paste mode to paste multiple commands at once with automatic comment filtering.</p>"},{"location":"guides/#delete-role-guide","title":"Delete Role Guide","text":"<p>Step-by-step guide for deleting local roles from your role storage.</p>"},{"location":"guides/#platform-engineer-guide","title":"Platform Engineer Guide","text":"<p>Comprehensive getting started guide for platform engineers covering installation, authentication, basic usage, and advanced workflows.</p>"},{"location":"guides/delete-role/","title":"Delete Local Roles","text":""},{"location":"guides/delete-role/#overview","title":"Overview","text":"<p>The <code>delete</code> command allows you to: - Remove a single local role by name - Bulk delete multiple roles matching a filter pattern</p> <p>This is useful for cleaning up old, test, or outdated roles.</p>"},{"location":"guides/delete-role/#usage","title":"Usage","text":""},{"location":"guides/delete-role/#delete-single-role-by-name","title":"Delete Single Role by Name","text":"<p>Delete a role with confirmation prompt:</p> <pre><code>delete MyRole\n</code></pre> <p>You'll be prompted to confirm: <pre><code>\u26a0 Delete role 'MyRole'?\nAre you sure? [y/N]: y\n\u2713 Deleted role 'MyRole'\n</code></pre></p>"},{"location":"guides/delete-role/#delete-multiple-roles-by-filter-pattern","title":"Delete Multiple Roles by Filter Pattern","text":"<p>Delete all roles matching a wildcard pattern:</p> <pre><code>delete --filter \"*test*\"\n</code></pre> <p>The command shows matching roles and asks for confirmation: <pre><code>Found 3 role(s) matching filter '*test*':\n  \u2022 test-role-001\n  \u2022 test-role-002\n  \u2022 local-test-prod\n\nDelete 3 role(s)? [y/N]: y\n\u2713 Deleted 3 role(s)\n</code></pre></p>"},{"location":"guides/delete-role/#force-delete-skip-confirmation","title":"Force Delete (Skip Confirmation)","text":"<p>Delete without confirmation using the <code>--force</code> flag:</p> <pre><code>delete MyRole --force\n</code></pre> <p>Or with filter:</p> <pre><code>delete --filter \"*test*\" --force\n</code></pre>"},{"location":"guides/delete-role/#delete-from-custom-directory","title":"Delete from Custom Directory","text":"<p>Specify a custom roles directory:</p> <pre><code>delete MyRole --role-dir /path/to/roles\n</code></pre> <p>Or with filter:</p> <pre><code>delete --filter \"local-*\" --role-dir /path/to/roles\n</code></pre>"},{"location":"guides/delete-role/#options","title":"Options","text":"Option Description <code>NAME</code> Name of a single role to delete (optional if using --filter) <code>--filter</code> Wildcard pattern to match multiple roles (optional if using NAME) <code>--role-dir</code> Custom directory containing roles <code>--force</code> Skip confirmation prompt"},{"location":"guides/delete-role/#filter-patterns","title":"Filter Patterns","text":"<p>Wildcard patterns use standard shell-style matching:</p> Pattern Matches Example <code>*</code> Any characters <code>delete --filter \"*\"</code> - delete all roles <code>prefix*</code> Starts with <code>delete --filter \"test-*\"</code> - all test roles <code>*suffix</code> Ends with <code>delete --filter \"*-local\"</code> - all local roles <code>*middle*</code> Contains <code>delete --filter \"*prod*\"</code> - roles with \"prod\" in name <code>?</code> Single character <code>delete --filter \"role?\"</code> - role1, role2, etc."},{"location":"guides/delete-role/#examples","title":"Examples","text":""},{"location":"guides/delete-role/#example-1-delete-a-single-role","title":"Example 1: Delete a single role","text":"<pre><code>&gt; delete TestRole\n\u26a0 Delete role 'TestRole'?\nAre you sure? [y/N]: y\n\u2713 Deleted role 'TestRole'\n</code></pre>"},{"location":"guides/delete-role/#example-2-delete-all-test-roles","title":"Example 2: Delete all test roles","text":"<pre><code>&gt; delete --filter \"*test*\"\n\nFound 3 role(s) matching filter '*test*':\n  \u2022 test-role-001\n  \u2022 test-role-002\n  \u2022 integration-test\n\nDelete 3 role(s)? [y/N]: y\n\u2713 Deleted 3 role(s)\n</code></pre>"},{"location":"guides/delete-role/#example-3-force-delete-all-local-roles","title":"Example 3: Force delete all local roles","text":"<pre><code>&gt; delete --filter \"*local*\" --force\n\u2713 Deleted 5 role(s)\n</code></pre>"},{"location":"guides/delete-role/#example-4-delete-from-alternate-directory","title":"Example 4: Delete from alternate directory","text":"<pre><code>&gt; delete RoleInBackup --role-dir ./backups --force\n\u2713 Deleted role 'RoleInBackup'\n</code></pre>"},{"location":"guides/delete-role/#safety-features","title":"Safety Features","text":"<ul> <li>Existence check first: The command verifies role(s) exist before asking for confirmation</li> <li>Clear listing: Shows all matching roles before asking for deletion</li> <li>Confirmation prompt: By default, you must confirm deletion with 'y'</li> <li>Error handling: Shows errors immediately if no roles match or invalid arguments</li> <li>File-based: Only deletes local JSON files, never affects Azure roles</li> <li>Mutual exclusion: Cannot use both NAME and --filter in the same command</li> </ul>"},{"location":"guides/delete-role/#related-commands","title":"Related Commands","text":"<ul> <li><code>list</code> - List available local roles</li> <li><code>create</code> - Create a new local role</li> <li><code>save</code> - Save current role to file</li> <li><code>load</code> - Load a role from file or storage</li> </ul>"},{"location":"guides/delete-role/#notes","title":"Notes","text":"<ul> <li>Only deletes the local JSON file, does not affect Azure roles</li> <li>Role names are case-sensitive in filters</li> <li>You can use either <code>RoleName</code> or <code>RoleName.json</code> as the NAME argument</li> <li>Filter patterns are case-insensitive</li> </ul>"},{"location":"guides/paste-mode/","title":"Multi-Line Paste Mode","text":""},{"location":"guides/paste-mode/#overview","title":"Overview","text":"<p>The console mode includes a <code>paste</code> command that enables you to paste multiple commands at once, similar to shell script execution. This is ideal for sharing command sequences or pasting examples from documentation.</p>"},{"location":"guides/paste-mode/#usage","title":"Usage","text":""},{"location":"guides/paste-mode/#basic-workflow","title":"Basic Workflow","text":"<ol> <li> <p>Enter the console:    <pre><code>custom-role-designer console\n</code></pre></p> </li> <li> <p>Start paste mode:    <pre><code>&gt; paste\n</code></pre></p> </li> <li> <p>Paste your commands (lines starting with <code>#</code> are filtered as comments):    <pre><code># Create and configure a custom role\ncreate-custom\nset-name --name DataRole\nset-description --description \"My custom role\"\nview\nsave\n</code></pre></p> </li> <li> <p>Press Enter twice (once for last command, once empty line to submit):    <pre><code>&gt; paste\n</code></pre>    (paste all lines, then press Enter after last line, then press Enter again for empty line)</p> </li> </ol>"},{"location":"guides/paste-mode/#examples","title":"Examples","text":""},{"location":"guides/paste-mode/#example-1-create-and-configure-role","title":"Example 1: Create and Configure Role","text":"<pre><code>&gt; paste\nEnter multiple commands (press Enter twice to submit):\n  # Create storage role\n  create-custom\n  set-name --name StorageAdmin\n  set-description --description \"Azure Storage administration\"\n  view\n  save\n  (press Enter for empty line)\n</code></pre>"},{"location":"guides/paste-mode/#example-2-load-merge-and-modify","title":"Example 2: Load, Merge, and Modify","text":"<pre><code>&gt; paste\nEnter multiple commands (press Enter twice to submit):\n  # Load and enhance existing role\n  load --name BaseComputeRole\n  merge --role-dir /templates/compute-enhancements\n  set-name --name EnhancedComputeRole\n  set-description --description \"Updated compute role\"\n  view\n  save\n  (press Enter for empty line)\n</code></pre>"},{"location":"guides/paste-mode/#example-3-multi-scope-deployment","title":"Example 3: Multi-Scope Deployment","text":"<pre><code>&gt; paste\nEnter multiple commands (press Enter twice to submit):\n  # Deploy role across multiple subscriptions\n  create-custom\n  set-name --name CrossTenantRole\n  set-description --description \"Role for multiple subscriptions\"\n  set-scopes /subscriptions/prod-001,/subscriptions/prod-002\n  view --show-all\n  publish --subscription-id prod-001\n  (press Enter for empty line)\n</code></pre>"},{"location":"guides/paste-mode/#features","title":"Features","text":"<ul> <li>Comment filtering: Lines starting with <code>#</code> are automatically ignored</li> <li>Empty line support: Blank lines between commands are skipped</li> <li>Sequential execution: All commands execute in order with full error handling</li> <li>Output display: Each command is shown with <code>[dim]&gt;&gt;</code> prefix for clarity</li> <li>Error resilience: If one command fails, remaining commands continue executing</li> </ul>"},{"location":"guides/paste-mode/#differences-from-single-line-mode","title":"Differences from Single-Line Mode","text":"Feature Single-Line Paste Mode Input method Type one command, press Enter Paste multiple lines, press Enter twice Comments Not supported Automatic filtering of <code>#</code> lines Multiple commands One at a time All at once Error handling Stop on error Continue through errors Use case Interactive use Batch operations, scripts, documentation"},{"location":"guides/paste-mode/#tips","title":"Tips","text":"<ol> <li> <p>Copy from documentation: Open a documentation example, copy it, switch to the console, type <code>paste</code>, paste the code, press Enter twice</p> </li> <li> <p>Reuse workflows: Keep common command sequences as text files, paste them into paste mode when needed</p> </li> <li> <p>Share with team: Write command sequences in a file and share them - team members just paste into <code>paste</code> mode</p> </li> <li> <p>Script testing: Test shell-like scripts before automating them in CI/CD pipelines</p> </li> </ol>"},{"location":"guides/paste-mode/#related-commands","title":"Related Commands","text":"<ul> <li><code>help paste</code> - Show detailed help for paste command (in interactive mode)</li> <li><code>console</code> - Enter interactive console mode</li> <li><code>!&lt;command&gt;</code> - Execute shell commands inline</li> <li><code>shell &lt;cmd&gt;</code> - Execute shell commands inline</li> </ul>"},{"location":"guides/paste-mode/#exit-paste-mode","title":"Exit Paste Mode","text":"<p>You can exit paste mode without executing by pressing Ctrl+C during input.</p>"},{"location":"guides/platform-engineer/","title":"Azure Custom Role Designer - Platform Engineer Guide","text":""},{"location":"guides/platform-engineer/#overview","title":"Overview","text":"<p>Azure Custom Role Designer is a command-line tool that streamlines the creation and management of Azure custom roles. It provides a flexible interface for platform engineers to build roles with granular permission control.</p>"},{"location":"guides/platform-engineer/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Installation</li> <li>Authentication</li> <li>Basic Usage</li> <li>Advanced Examples</li> <li>Workflow Scenarios</li> <li>Troubleshooting</li> </ol>"},{"location":"guides/platform-engineer/#installation","title":"Installation","text":""},{"location":"guides/platform-engineer/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.8+</li> <li>Azure CLI (for authentication)</li> <li>Access to an Azure subscription</li> </ul>"},{"location":"guides/platform-engineer/#setup","title":"Setup","text":"<pre><code># Navigate to the project\ncd azure-custom-role-tool\n\n# Option 1: Quick setup script\nbash setup.sh\n\n# Option 2: Manual setup\npython3 -m venv venv\nsource venv/bin/activate  # On Windows: venv\\Scripts\\activate\n\n# Install the package\npip install .\n\n# Or install in development mode (for contributions)\npip install -e .\n</code></pre>"},{"location":"guides/platform-engineer/#verify-installation","title":"Verify Installation","text":"<pre><code># Check that the command is available\ncustom-role-designer --help\n\n# Or use it through Python\npython -m azure_custom_role_tool --help\n</code></pre>"},{"location":"guides/platform-engineer/#azure-cli-login","title":"Azure CLI Login","text":"<p>If using Azure CLI authentication (recommended):</p> <pre><code>az login\naz account set --subscription \"your-subscription-id\"\n</code></pre>"},{"location":"guides/platform-engineer/#authentication","title":"Authentication","text":""},{"location":"guides/platform-engineer/#option-1-azure-cli-recommended","title":"Option 1: Azure CLI (Recommended)","text":"<p>Most straightforward for local development:</p> <pre><code>az login\n# The tool will automatically use your CLI credentials\n</code></pre>"},{"location":"guides/platform-engineer/#option-2-service-principal","title":"Option 2: Service Principal","text":"<p>For CI/CD pipelines or headless environments:</p> <pre><code># Set environment variables\nexport AZURE_SUBSCRIPTION_ID=\"your-subscription-id\"\nexport AZURE_TENANT_ID=\"your-tenant-id\"\nexport AZURE_CLIENT_ID=\"your-client-id\"\nexport AZURE_CLIENT_SECRET=\"your-client-secret\"\n\n# Copy .env.example to .env and fill in values\ncp .env.example .env\n</code></pre>"},{"location":"guides/platform-engineer/#option-3-managed-identity","title":"Option 3: Managed Identity","text":"<p>When running on Azure resources (VMs, ACI, App Service):</p> <pre><code># No configuration needed - automatically detected\n</code></pre>"},{"location":"guides/platform-engineer/#basic-usage","title":"Basic Usage","text":""},{"location":"guides/platform-engineer/#interactive-mode","title":"Interactive Mode","text":"<pre><code>custom-role-designer console\n</code></pre> <p>This launches an interactive menu where you can navigate through all operations.</p> <p>Interactive Mode Features: - Use arrow keys (\u2191/\u2193) to recall and navigate through previous commands - Command history persists across sessions (stored in <code>~/.custom-role-designer-history</code>) - Type <code>help &lt;command&gt;</code> for detailed help on specific commands - The current role stays loaded throughout the session, making it easy to chain operations</p> <p>Tips for Interactive Mode: - Start with loading or creating a role - Use arrow keys to quickly repeat or modify previous commands - View the current role at any time with the <code>view</code> command - Exit with <code>exit</code> or <code>quit</code> commands, or press Ctrl+C</p>"},{"location":"guides/platform-engineer/#command-line-mode","title":"Command Line Mode","text":""},{"location":"guides/platform-engineer/#create-a-new-role","title":"Create a New Role","text":"<pre><code># Start with empty role\ncustom-role-designer create --name \"My Custom Role\" --description \"Custom role for my team\"\n</code></pre>"},{"location":"guides/platform-engineer/#load-existing-role","title":"Load Existing Role","text":"<pre><code># Load from local file\ncustom-role-designer load --name \"devops-developer\"\n\n# Load from custom directory\ncustom-role-designer load --name \"my-role\" --role-dir /path/to/roles\n</code></pre>"},{"location":"guides/platform-engineer/#view-role-details","title":"View Role Details","text":"<pre><code># Show summary\ncustom-role-designer view\n\n# Show all permissions (no truncation)\ncustom-role-designer view --all\n</code></pre>"},{"location":"guides/platform-engineer/#save-role","title":"Save Role","text":"<pre><code># Save to default roles directory\ncustom-role-designer save --name \"my-role\"\n\n# Save to custom location\ncustom-role-designer save --name \"my-role\" --output /path/to/my-role.json\n\n# Overwrite existing file\ncustom-role-designer save --name \"my-role\" --overwrite\n</code></pre>"},{"location":"guides/platform-engineer/#advanced-examples","title":"Advanced Examples","text":""},{"location":"guides/platform-engineer/#example-1-create-developer-role-from-scratch","title":"Example 1: Create Developer Role from Scratch","text":"<pre><code># Create new role\ncustom-role-designer create --name \"App Developer\" --description \"Permissions for app development\"\n\n# Merge read permissions from multiple roles\ncustom-role-designer merge --roles \"junior-developer,reader\" --filter \"*read*\"\n\n# Remove delete operations\ncustom-role-designer remove --filter \"*delete*\" --filter-type control\n\n# Save locally\ncustom-role-designer save --name \"app-developer\"\n\n# Publish to Azure\ncustom-role-designer publish --name \"app-developer\"\n</code></pre>"},{"location":"guides/platform-engineer/#example-2-cherry-pick-specific-permissions","title":"Example 2: Cherry-pick Specific Permissions","text":"<pre><code># Create new role\ncustom-role-designer create --name \"Storage Manager\" --description \"Manage Azure Storage\"\n\n# Merge only storage permissions from senior developer role\ncustom-role-designer merge --roles \"senior-developer\" --filter \"Microsoft.Storage*\"\n\n# Add specific data plane permissions\ncustom-role-designer merge --roles \"reader\" --filter \"blobs/read\" --filter-type data\n\n# Save and publish\ncustom-role-designer save --name \"storage-manager\" --overwrite\ncustom-role-designer publish --name \"storage-manager\"\n</code></pre>"},{"location":"guides/platform-engineer/#example-3-merge-multiple-roles-with-filtering","title":"Example 3: Merge Multiple Roles with Filtering","text":"<pre><code># Create new role\ncustom-role-designer create --name \"DevOps Manager\" --description \"Ops role for DevOps team\"\n\n# Merge control plane permissions from multiple roles\ncustom-role-designer merge \\\n  --roles \"devops-developer,senior-developer,infrastructure-admin\" \\\n  --filter-type control\n\n# Remove specific dangerous operations\ncustom-role-designer remove --filter \"*delete*\"\ncustom-role-designer remove --filter \"*deallocate*\"\n\n# Save\ncustom-role-designer save --name \"devops-manager\" --overwrite\n</code></pre>"},{"location":"guides/platform-engineer/#example-4-create-restricted-viewer-role","title":"Example 4: Create Restricted Viewer Role","text":"<pre><code># Start with reader permissions\ncustom-role-designer create --name \"Audit Viewer\" --description \"Read-only audit permissions\"\n\n# Load and merge reader role\ncustom-role-designer merge --roles \"reader\" --filter \"*read*\"\n\n# Remove sensitive data access\ncustom-role-designer remove --filter \"keys/read\" --filter-type data\ncustom-role-designer remove --filter \"secrets/read\" --filter-type data\n\n# Save\ncustom-role-designer save --name \"audit-viewer\"\n</code></pre>"},{"location":"guides/platform-engineer/#workflow-scenarios","title":"Workflow Scenarios","text":""},{"location":"guides/platform-engineer/#scenario-1-request-design-test-publish","title":"Scenario 1: Request \u2192 Design \u2192 Test \u2192 Publish","text":"<p>Step 1: Create Role Design</p> <pre><code># Create new role based on requirements\ncustom-role-designer create --name \"DataEngineer-Prod\" --description \"Production data processing\"\n\n# Build from senior developer permissions\ncustom-role-designer merge --roles \"senior-developer\"\n\n# Keep only data-related permissions\ncustom-role-designer remove --filter \"*Compute*\"\ncustom-role-designer remove --filter \"*Network*\"\n</code></pre> <p>Step 2: Review</p> <pre><code>custom-role-designer view --all\n</code></pre> <p>Step 3: Save Locally for Review</p> <pre><code>custom-role-designer save --name \"dataengineer-prod\"\n# Commit to Git for review: roles/dataengineer-prod.json\n</code></pre> <p>Step 4: Publish After Approval</p> <pre><code>custom-role-designer publish --name \"dataengineer-prod\"\n</code></pre>"},{"location":"guides/platform-engineer/#scenario-2-update-existing-role","title":"Scenario 2: Update Existing Role","text":"<pre><code># Load existing role\ncustom-role-designer load --name \"dataengineer-prod\"\n\n# View current permissions\ncustom-role-designer view --all\n\n# Add new required permissions\ncustom-role-designer merge --roles \"senior-developer\" --filter \"PostgreSQL*\"\n\n# Remove deprecated permissions\ncustom-role-designer remove --filter \"Legacy*\"\n\n# Save and publish\ncustom-role-designer save --name \"dataengineer-prod\" --overwrite\ncustom-role-designer publish --name \"dataengineer-prod\"\n</code></pre>"},{"location":"guides/platform-engineer/#scenario-3-compare-multiple-roles","title":"Scenario 3: Compare Multiple Roles","text":"<pre><code># List available roles\ncustom-role-designer list\n\n# View each role\ncustom-role-designer list --name \"senior-developer\"\ncustom-role-designer list --name \"junior-developer\"\n\n# Use to understand permission differences before merging\n</code></pre>"},{"location":"guides/platform-engineer/#filtering-guide","title":"Filtering Guide","text":""},{"location":"guides/platform-engineer/#string-filters","title":"String Filters","text":"<p>String filters use wildcard patterns (case-insensitive):</p> <pre><code># Exact match\ncustom-role-designer merge --roles \"senior-developer\" --filter \"Microsoft.Storage/storageAccounts/read\"\n\n# Wildcard match\ncustom-role-designer merge --roles \"senior-developer\" --filter \"Microsoft.Storage*\"\n\n# Partial match\ncustom-role-designer merge --roles \"senior-developer\" --filter \"*blobs*\"\n\n# Complex patterns\ncustom-role-designer merge --roles \"senior-developer\" --filter \"Microsoft.*/*/read\"\n</code></pre>"},{"location":"guides/platform-engineer/#type-filters","title":"Type Filters","text":"<pre><code># Control plane only (management operations)\ncustom-role-designer merge --roles \"senior-developer\" --filter-type control\n\n# Data plane only (data operations)\ncustom-role-designer merge --roles \"senior-developer\" --filter-type data\n\n# Combine filters\ncustom-role-designer merge --roles \"senior-developer\" --filter \"Storage*\" --filter-type data\n</code></pre>"},{"location":"guides/platform-engineer/#permission-categories","title":"Permission Categories","text":""},{"location":"guides/platform-engineer/#control-plane-permissions","title":"Control Plane Permissions","text":"<p>Management operations on Azure resources. Examples: - <code>Microsoft.Compute/virtualMachines/start/action</code> - <code>Microsoft.Storage/storageAccounts/write</code> - <code>Microsoft.Network/virtualNetworks/delete</code></p>"},{"location":"guides/platform-engineer/#data-plane-permissions","title":"Data Plane Permissions","text":"<p>Operations on data within Azure resources. Examples: - <code>Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read</code> - <code>Microsoft.Sql/servers/databases/tables/data/read</code> - <code>Microsoft.KeyVault/vaults/secrets/read</code></p>"},{"location":"guides/platform-engineer/#best-practices","title":"Best Practices","text":""},{"location":"guides/platform-engineer/#1-principle-of-least-privilege","title":"1. Principle of Least Privilege","text":"<p>Always start restrictive and add permissions as needed:</p> <pre><code># Good: Create empty, add specific permissions\ncustom-role-designer create --name \"App Developer\"\ncustom-role-designer merge --roles \"basic-reader\" --filter \"Microsoft.Web*\"\n\n# Avoid: Creating with wildcard permissions\ncustom-role-designer merge --roles \"contributor\"\n</code></pre>"},{"location":"guides/platform-engineer/#2-document-your-roles","title":"2. Document Your Roles","text":"<p>Always include clear descriptions:</p> <pre><code>custom-role-designer create \\\n  --name \"DataEngineer\" \\\n  --description \"Create/update data pipelines and manage Azure Data Factory, SQL Database, and Storage accounts. Cannot delete resources or modify access controls.\"\n</code></pre>"},{"location":"guides/platform-engineer/#3-use-filters-for-safety","title":"3. Use Filters for Safety","text":"<p>Always remove dangerous operations:</p> <pre><code>custom-role-designer merge --roles \"senior-developer\"\ncustom-role-designer remove --filter \"*delete*\"\ncustom-role-designer remove --filter \"*deallocate*\"\n</code></pre>"},{"location":"guides/platform-engineer/#4-version-your-roles","title":"4. Version Your Roles","text":"<p>Include environment/version in role names:</p> <pre><code>custom-role-designer create --name \"DataEngineer-Dev-v1\"\ncustom-role-designer create --name \"DataEngineer-Prod-v2\"\n</code></pre>"},{"location":"guides/platform-engineer/#5-review-changes","title":"5. Review Changes","text":"<p>Always view the final role before publishing:</p> <pre><code>custom-role-designer view --all\n# Review output, then:\ncustom-role-designer publish --name \"my-role\"\n</code></pre>"},{"location":"guides/platform-engineer/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/platform-engineer/#issue-azure_subscription_id-not-set","title":"Issue: \"AZURE_SUBSCRIPTION_ID not set\"","text":"<p>Solution: Set your subscription ID:</p> <pre><code>export AZURE_SUBSCRIPTION_ID=\"your-subscription-id\"\n# Or\necho \"AZURE_SUBSCRIPTION_ID=your-subscription-id\" &gt; .env\n</code></pre>"},{"location":"guides/platform-engineer/#issue-failed-to-authenticate","title":"Issue: \"Failed to authenticate\"","text":"<p>Solution: Ensure Azure CLI is logged in:</p> <pre><code>az login\naz account set --subscription \"your-subscription-id\"\n</code></pre>"},{"location":"guides/platform-engineer/#issue-role-not-found","title":"Issue: \"Role not found\"","text":"<p>Solution: Verify role exists and correct directory:</p> <pre><code>custom-role-designer list\ncustom-role-designer list --role-dir /path/to/roles\n</code></pre>"},{"location":"guides/platform-engineer/#issue-no-current-role","title":"Issue: \"No current role\"","text":"<p>Solution: Create or load a role first:</p> <pre><code>custom-role-designer create --name \"MyRole\" --description \"Test\"\n# or\ncustom-role-designer load --name \"existing-role\"\n</code></pre>"},{"location":"guides/platform-engineer/#issue-permissions-not-merged-as-expected","title":"Issue: \"Permissions not merged as expected\"","text":"<p>Solution: Check your filters:</p> <pre><code># List role to see permission names\ncustom-role-designer list --name \"source-role\"\n\n# Test filter pattern\ncustom-role-designer merge --roles \"source-role\" --filter \"exact-permission-name\"\n</code></pre>"},{"location":"guides/platform-engineer/#integration-with-cicd","title":"Integration with CI/CD","text":""},{"location":"guides/platform-engineer/#example-github-actions","title":"Example: GitHub Actions","text":"<pre><code>- name: Create Azure Role\n  run: |\n    custom-role-designer create --name \"CI-Role\"\n    custom-role-designer merge --roles \"devops-developer\"\n    custom-role-designer publish --name \"CI-Role\"\n  env:\n    AZURE_SUBSCRIPTION_ID: ${{ secrets.AZURE_SUBSCRIPTION_ID }}\n    AZURE_TENANT_ID: ${{ secrets.AZURE_TENANT_ID }}\n    AZURE_CLIENT_ID: ${{ secrets.AZURE_CLIENT_ID }}\n    AZURE_CLIENT_SECRET: ${{ secrets.AZURE_CLIENT_SECRET }}\n</code></pre>"},{"location":"guides/platform-engineer/#support-and-contribution","title":"Support and Contribution","text":"<p>For issues, feature requests, or contributions:</p> <ol> <li>Document your use case</li> <li>Include example commands</li> <li>Share any relevant logs</li> <li>Contact the platform engineering team</li> </ol> <p>Last Updated: February 2026 Version: 1.0</p>"},{"location":"reference/","title":"Reference Documentation","text":"<p>Complete reference guides for Azure Custom Role Designer.</p>"},{"location":"reference/#available-resources","title":"Available Resources","text":""},{"location":"reference/#feature-reference","title":"Feature Reference","text":"<p>Comprehensive command list, features, patterns, and examples for all available commands.</p>"},{"location":"reference/#quick-reference","title":"Quick Reference","text":"<p>Quick lookup for multi-line scripts command patterns and usage.</p>"},{"location":"reference/feature-reference/","title":"Azure Custom Role Designer - Feature Reference","text":""},{"location":"reference/feature-reference/#complete-feature-set","title":"\ud83d\udccb Complete Feature Set","text":"<p>This document provides a comprehensive reference for all capabilities of the Azure Custom Role Designer tool.</p>"},{"location":"reference/feature-reference/#core-features","title":"Core Features","text":""},{"location":"reference/feature-reference/#1-create-roles-from-scratch","title":"\u2705 1. Create Roles from Scratch","text":"<p>Create a brand new custom role with no initial permissions:</p> <pre><code>custom-role-designer create --name \"MyRole\" --description \"My custom role\"\n</code></pre> <p>Features: - Auto-generate unique role IDs - Set timestamps automatically - Initialize empty permission blocks - Ready for adding permissions</p>"},{"location":"reference/feature-reference/#2-cherry-pick-permissions-from-roles","title":"\u2705 2. Cherry-pick Permissions from Roles","text":"<p>Selectively choose specific permissions from existing roles:</p> <pre><code># Merge single permission exactly\ncustom-role-designer merge --roles \"source-role\" --filter \"Microsoft.Storage/storageAccounts/read\"\n\n# Merge specific action patterns\ncustom-role-designer merge --roles \"source-role\" --filter \"Microsoft.Web*\"\n</code></pre> <p>Features: - Wildcard pattern matching - Case-insensitive search - Regex support (if needed) - Deduplication across merges</p>"},{"location":"reference/feature-reference/#3-merge-permissions-from-multiple-roles","title":"\u2705 3. Merge Permissions from Multiple Roles","text":"<p>Combine permissions from multiple source roles simultaneously:</p> <pre><code># Simple merge\ncustom-role-designer merge --roles \"role1,role2,role3\"\n\n# With filtering\ncustom-role-designer merge --roles \"junior-dev,reader,viewer\" --filter \"*read*\"\n\n# Multiple filters\ncustom-role-designer merge --roles \"senior-dev\" --filter \"Storage*\" --filter-type data\n</code></pre> <p>Features: - Combine multiple roles at once - Automatic deduplication - Preserve action/notaction/dataaction/notdataaction structure - Smart list management</p>"},{"location":"reference/feature-reference/#4-filter-by-string-pattern","title":"\u2705 4. Filter by String Pattern","text":"<p>Search and filter permissions by text patterns:</p> <pre><code># Simple wildcard\ncustom-role-designer merge --roles \"senior-dev\" --filter \"Storage*\"\n\n# Partial match\ncustom-role-designer merge --roles \"senior-dev\" --filter \"*blobs*\"\n\n# Complex pattern\ncustom-role-designer merge --roles \"senior-dev\" --filter \"Microsoft.Storage/storageAccounts/blobServices/*\"\n</code></pre> <p>Filter Syntax: - <code>*</code> for wildcards: <code>Microsoft.Storage*</code> matches all Storage services - Case-insensitive matching - Supports partial token matching: <code>*/read</code> matches any read operations - Regex patterns (optional advanced usage)</p> <p>Examples: - <code>Microsoft.Storage*</code> - All Storage service operations - <code>*read</code> - All read operations - <code>Microsoft.*/*/write</code> - Write operations on any service - <code>*Blob*/</code> - Blob-related operations</p>"},{"location":"reference/feature-reference/#5-filter-by-permission-type","title":"\u2705 5. Filter by Permission Type","text":"<p>Separate and manage control vs. data plane permissions:</p> <pre><code># Control plane only (management operations)\ncustom-role-designer merge --roles \"senior-dev\" --filter-type control\n\n# Data plane only (data operations)\ncustom-role-designer merge --roles \"senior-dev\" --filter-type data\n\n# Combined with string filter\ncustom-role-designer merge --roles \"senior-dev\" --filter \"Storage*\" --filter-type data\n</code></pre> <p>Permission Types:</p> <p>Control Plane (Management): - Resource creation/deletion - Configuration changes - Access management - Example: <code>Microsoft.Compute/virtualMachines/start/action</code></p> <p>Data Plane (Data Operations): - Read/write data - Query databases - Blob access - Example: <code>Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read</code></p>"},{"location":"reference/feature-reference/#6-remove-permissions","title":"\u2705 6. Remove Permissions","text":"<p>Filter and remove specific permissions from the current role:</p> <pre><code># Remove by pattern\ncustom-role-designer remove --filter \"*delete*\"\n\n# Remove by type\ncustom-role-designer remove --filter-type data\n\n# Combined filtering\ncustom-role-designer remove --filter \"Microsoft.Storage*\" --filter-type control\n\n# Remove dangerous operations\ncustom-role-designer remove --filter \"*deallocate*\"\ncustom-role-designer remove --filter \"*delete*\"\n</code></pre> <p>Features: - Same filtering syntax as merge - Safe removal (won't affect unmatched permissions) - Can be called multiple times</p>"},{"location":"reference/feature-reference/#7-load-and-save-local-roles","title":"\u2705 7. Load and Save Local Roles","text":"<p>Persist role definitions locally for version control:</p> <pre><code># Load from default directory\ncustom-role-designer load --name \"my-role\"\n\n# Load from custom directory\ncustom-role-designer load --name \"my-role\" --role-dir ./archive\n\n# Save to default directory\ncustom-role-designer save --name \"my-role\"\n\n# Save to custom location\ncustom-role-designer save --name \"my-role\" --output ./roles/my-role.json\n\n# Overwrite existing\ncustom-role-designer save --name \"my-role\" --overwrite\n</code></pre> <p>Features: - JSON-based storage - Auto-generated filenames - Preserves metadata (timestamps, IDs) - Overwrite protection</p>"},{"location":"reference/feature-reference/#8-publish-to-azure","title":"\u2705 8. Publish to Azure","text":"<p>Deploy created/modified roles directly to Azure:</p> <pre><code># Publish simple\ncustom-role-designer publish --name \"my-role\"\n\n# Publish with specific subscription\ncustom-role-designer publish --name \"my-role\" --subscription-id \"xxxxx-xxxxx\"\n</code></pre> <p>Features: - Direct Azure deployment - Automatic subscription detection - Role versioning support - Error handling and validation</p>"},{"location":"reference/feature-reference/#9-list-and-view-roles","title":"\u2705 9. List and View Roles","text":"<p>Browse and inspect local and Azure roles:</p> <pre><code># List all local roles\ncustom-role-designer list\n\n# View specific role details\ncustom-role-designer list --name \"my-role\"\n\n# List Azure roles\ncustom-role-designer list-azure\n\n# View current role in detail\ncustom-role-designer view\n\n# Show all permissions (no truncation)\ncustom-role-designer view --all\n</code></pre> <p>Features: - Formatted table output - Permission counts - Truncation for readability - Full details on demand</p>"},{"location":"reference/feature-reference/#10-interactive-mode","title":"\u2705 10. Interactive Mode","text":"<p>Full-featured interactive CLI menu:</p> <pre><code>custom-role-designer\n</code></pre> <p>Features: - Menu-driven interface - Command history - Real-time role status display - Help system</p>"},{"location":"reference/feature-reference/#advanced-usage-patterns","title":"Advanced Usage Patterns","text":""},{"location":"reference/feature-reference/#pattern-1-incremental-permission-building","title":"Pattern 1: Incremental Permission Building","text":"<pre><code># Start with empty role\ncustom-role-designer create --name \"BuildingRole\" --description \"Incrementally built\"\n\n# Add read-only permissions\ncustom-role-designer merge --roles \"reader\"\n\n# Add specific data access\ncustom-role-designer merge --roles \"senior-dev\" --filter \"*Blob*\" --filter-type data\n\n# Add storage management (but not delete)\ncustom-role-designer merge --roles \"storage-admin\" --filter \"Microsoft.Storage*\"\ncustom-role-designer remove --filter \"*delete*\"\n</code></pre>"},{"location":"reference/feature-reference/#pattern-2-role-specialization-from-broad-base","title":"Pattern 2: Role Specialization from Broad Base","text":"<pre><code># Start with contributor-like permissions\ncustom-role-designer create --name \"WebDeveloper\" --description \"Web developer permissions\"\ncustom-role-designer merge --roles \"contributor\"\n\n# Remove unnecessary resources\ncustom-role-designer remove --filter \"Microsoft.Compute*\"\ncustom-role-designer remove --filter \"Microsoft.Network*\"\ncustom-role-designer remove --filter \"Microsoft.Sql*\"\n\n# Remove dangerous operations\ncustom-role-designer remove --filter \"*delete*\"\n</code></pre>"},{"location":"reference/feature-reference/#pattern-3-role-combination-for-teams","title":"Pattern 3: Role Combination for Teams","text":"<pre><code># Combine multiple specialized roles\ncustom-role-designer create --name \"CloudOpsTeam\" --description \"Combined CloudOps permissions\"\n\n# Combine DevOps, Infrastructure, and Monitoring\ncustom-role-designer merge --roles \"devops-developer,infrastructure-admin,monitoring-reader\"\n\n# Remove conflicts/sensitive ops\ncustom-role-designer remove --filter \"*delete*\"\n</code></pre>"},{"location":"reference/feature-reference/#pattern-4-environment-specific-roles","title":"Pattern 4: Environment-Specific Roles","text":"<pre><code># Development role - permissive\ncustom-role-designer create --name \"DataEng-Dev\" --description \"Dev environment\"\ncustom-role-designer merge --roles \"senior-developer\"\n\n# Production role - restrictive\ncustom-role-designer create --name \"DataEng-Prod\" --description \"Prod environment\"\ncustom-role-designer merge --roles \"data-reader\"\ncustom-role-designer merge --roles \"pipeline-operator\" --filter \"Pipeline*\"\n</code></pre>"},{"location":"reference/feature-reference/#command-reference","title":"Command Reference","text":""},{"location":"reference/feature-reference/#global-options","title":"Global Options","text":"<pre><code>--help          Show help for any command\n--version       Show version information\n</code></pre>"},{"location":"reference/feature-reference/#commands","title":"Commands","text":"Command Purpose Options <code>create</code> Create new role <code>--name</code>, <code>--description</code>, <code>--subscription-id</code> <code>load</code> Load existing role <code>--name</code>, <code>--role-dir</code> <code>merge</code> Merge permissions <code>--roles</code>, <code>--filter</code>, <code>--filter-type</code> <code>remove</code> Remove permissions <code>--filter</code>, <code>--filter-type</code> <code>list</code> List roles <code>--name</code>, <code>--role-dir</code> <code>list-azure</code> List Azure roles <code>--subscription-id</code> <code>save</code> Save role locally <code>--name</code>, <code>--output</code>, <code>--overwrite</code> <code>publish</code> Publish to Azure <code>--name</code>, <code>--subscription-id</code> <code>view</code> View current role <code>--all</code>"},{"location":"reference/feature-reference/#file-structure","title":"File Structure","text":"<pre><code>azure-custom-role-tool/\n\u251c\u2500\u2500 README.md                        # Quick start guide\n\u251c\u2500\u2500 PLATFORM_ENGINEER_GUIDE.md       # Detailed usage guide\n\u251c\u2500\u2500 requirements.txt                 # Python dependencies\n\u251c\u2500\u2500 .env.example                     # Environment template\n\u251c\u2500\u2500 setup.sh                         # Setup script\n\u251c\u2500\u2500 .gitignore                       # Git ignore rules\n\u2502\n\u251c\u2500\u2500 custom_role_designer.py          # Main CLI tool\n\u251c\u2500\u2500 role_manager.py                  # Role management logic\n\u251c\u2500\u2500 permission_filter.py             # Filtering utilities\n\u251c\u2500\u2500 azure_client.py                  # Azure SDK integration\n\u251c\u2500\u2500 tests.py                         # Unit tests\n\u2502\n\u251c\u2500\u2500 examples/                        # Example role definitions\n\u2502   \u251c\u2500\u2500 junior-developer.json\n\u2502   \u251c\u2500\u2500 senior-developer.json\n\u2502   \u2514\u2500\u2500 devops-developer.json\n\u2502\n\u251c\u2500\u2500 roles/                           # Local saved roles\n\u2514\u2500\u2500 tests/                           # Test suite\n</code></pre>"},{"location":"reference/feature-reference/#data-model","title":"Data Model","text":""},{"location":"reference/feature-reference/#role-definition-json","title":"Role Definition (JSON)","text":"<pre><code>{\n  \"Name\": \"Custom Role Name\",\n  \"IsCustom\": true,\n  \"Description\": \"Role description\",\n  \"Type\": \"CustomRole\",\n  \"Id\": \"custom-xxxxx\",\n  \"Permissions\": [\n    {\n      \"Actions\": [\"Microsoft.*/*/read\"],\n      \"NotActions\": [\"Microsoft.Compute/*/delete\"],\n      \"DataActions\": [\"Microsoft.Storage/storageAccounts/blobServices/containers/blobs/*\"],\n      \"NotDataActions\": []\n    }\n  ],\n  \"AssignableScopes\": [\"/\"],\n  \"CreatedOn\": \"2024-01-01T00:00:00\",\n  \"UpdatedOn\": \"2024-01-01T00:00:00\"\n}\n</code></pre>"},{"location":"reference/feature-reference/#action-categories","title":"Action Categories","text":"<ul> <li>Actions: Control plane operations</li> <li>NotActions: Control plane operations to exclude</li> <li>DataActions: Data plane operations</li> <li>NotDataActions: Data plane operations to exclude</li> </ul>"},{"location":"reference/feature-reference/#filtering-syntax-reference","title":"Filtering Syntax Reference","text":""},{"location":"reference/feature-reference/#string-patterns","title":"String Patterns","text":"Pattern Matches Example <code>Exact</code> Exact match <code>Microsoft.Storage/storageAccounts/read</code> <code>*</code> Wildcard <code>Microsoft.Storage*</code> <code>prefix*</code> Starts with <code>Microsoft.Compute*</code> <code>*suffix</code> Ends with <code>*/read</code> <code>*middle*</code> Contains <code>*blobs*</code>"},{"location":"reference/feature-reference/#type-filters","title":"Type Filters","text":"<ul> <li><code>control</code> - Management plane only</li> <li><code>data</code> - Data plane only</li> <li>(omitted) - Both types</li> </ul>"},{"location":"reference/feature-reference/#error-handling","title":"Error Handling","text":""},{"location":"reference/feature-reference/#common-errors","title":"Common Errors","text":"Error Cause Solution <code>No current role</code> Not created/loaded Create or load a role first <code>Role not found</code> File doesn't exist Check file path and name <code>AZURE_SUBSCRIPTION_ID not set</code> Missing config Set env var or login to Azure CLI <code>Failed to authenticate</code> Auth issue Run <code>az login</code>"},{"location":"reference/feature-reference/#performance","title":"Performance","text":"<ul> <li>Merge many roles: Efficient deduplication (&lt; 1s for typical roles)</li> <li>Save/load: Fast JSON I/O (&lt; 100ms)</li> <li>Filter large roles: Regex matching optimized (&lt; 50ms)</li> <li>Azure operations: Depends on network (1-10s typical)</li> </ul>"},{"location":"reference/feature-reference/#security-considerations","title":"Security Considerations","text":"<ol> <li>Never commit secrets: Use <code>.env.example</code> template</li> <li>Review paths: Always use <code>--all</code> flag before publishing</li> <li>Role naming: Follow company standards</li> <li>Audit logging: Track all role publications</li> <li>Version control: Commit role files to Git</li> </ol>"},{"location":"reference/feature-reference/#integration-examples","title":"Integration Examples","text":""},{"location":"reference/feature-reference/#cicd-pipeline","title":"CI/CD Pipeline","text":"<pre><code>- name: Deploy Custom Role\n  run: |\n    custom-role-designer load --name \"prod-role\"\n    custom-role-designer view --all\n    custom-role-designer publish --name \"prod-role\"\n  env:\n    AZURE_SUBSCRIPTION_ID: ${{ secrets.AZURE_SUB }}\n</code></pre>"},{"location":"reference/feature-reference/#script-automation","title":"Script Automation","text":"<pre><code>#!/bin/bash\nfor role in $(ls roles/*.json); do\n  custom-role-designer load --role-dir roles --name $(basename $role .json)\n  custom-role-designer publish\ndone\n</code></pre>"},{"location":"reference/feature-reference/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>Permissions not merging: Check filter pattern with <code>list --name</code></li> <li>File already exists: Use <code>--overwrite</code> flag</li> <li>Azure publish fails: Verify subscription ID and permissions</li> <li>Tool crashes: Check Python version (3.8+) and dependencies</li> </ul> <p>Tool Version: 1.0 Last Updated: January 2024</p>"},{"location":"reference/quick-reference/","title":"Quick Reference: Multi-Line Script Support","text":""},{"location":"reference/quick-reference/#quick-start","title":"Quick Start","text":"<p>In console mode, you can now paste multiple commands:</p> <pre><code>&gt; # Create and configure role in one go\n&gt; create-custom\n&gt; set-name --name MyRole\n&gt; set-description --description \"My custom role\"\n&gt; view\n&gt; save\n</code></pre>"},{"location":"reference/quick-reference/#format","title":"Format","text":"<pre><code>&gt; # Comments start with #\n&gt; command-1 --option value\n&gt;\n&gt; # Blank lines are OK\n&gt; command-2 --flag\n&gt; command-3\n</code></pre>"},{"location":"reference/quick-reference/#key-features","title":"Key Features","text":"Feature Working Example Multi-line input \u2705 Paste 5+ commands at once Comment filtering \u2705 <code># This is ignored</code> Blank lines \u2705 Empty lines skipped automatically Special characters \u2705 <code>\"Multi word value\"</code>, pipes, etc. History support \u2705 All commands recorded Error handling \u2705 One failure doesn't stop batch Single-line mode \u2705 Works unchanged"},{"location":"reference/quick-reference/#implementation","title":"Implementation","text":""},{"location":"reference/quick-reference/#files-modified","title":"Files Modified","text":"<ul> <li><code>azure_custom_role_tool/cli.py</code> - Added parsing &amp; multi-line support</li> <li><code>tests/test_multiline_console.py</code> - 18 new tests (all passing)</li> </ul>"},{"location":"reference/quick-reference/#code-changes","title":"Code Changes","text":"<pre><code># New function\ndef parse_multiline_commands(text: str) -&gt; list[str]:\n    \"\"\"Filter comments/blanks from multi-line input\"\"\"\n\n# Enhanced interactive_mode()\nraw_input = prompt(\"&gt; ..., multiline=True)  # Accept multi-line\ncommands = parse_multiline_commands(raw_input)  # Parse &amp; filter\nfor command in commands:\n    # Execute each command\n</code></pre>"},{"location":"reference/quick-reference/#test-results","title":"Test Results","text":"<p>\u2705 126/126 tests passing - 108 existing tests (all still passing - no regressions) - 18 new tests for multi-line feature   - 15 parsing tests (comments, blanks, edge cases)   - 3 workflow tests (realistic scenarios)</p>"},{"location":"reference/quick-reference/#examples","title":"Examples","text":""},{"location":"reference/quick-reference/#example-1-simple-script","title":"Example 1: Simple Script","text":"<pre><code>&gt; create-custom\n&gt; set-name --name StorageRole\n&gt; view\n</code></pre>"},{"location":"reference/quick-reference/#example-2-script-with-comments","title":"Example 2: Script with Comments","text":"<pre><code>&gt; # Create custom role\n&gt; create-custom\n&gt;\n&gt; # Set properties\n&gt; set-name --name ComputeManager\n&gt; set-description --description \"VM administration\"\n&gt;\n&gt; # Save\n&gt; save\n</code></pre>"},{"location":"reference/quick-reference/#example-3-complex-workflow","title":"Example 3: Complex Workflow","text":"<pre><code>&gt; # Load existing role\n&gt; load --name BaseRole\n&gt;\n&gt; # Enhance with new permissions\n&gt; merge --role-dir /templates/enhancements\n&gt;\n&gt; # Update metadata\n&gt; set-name --name EnhancedRole\n&gt; set-description --description \"Enhanced with new features\"\n&gt;\n&gt; # Configure scopes\n&gt; set-scopes /subscriptions/prod-001,/subscriptions/prod-002\n&gt;\n&gt; # Deploy\n&gt; view --show-all\n&gt; save\n&gt; publish --subscription-id prod-001\n</code></pre>"},{"location":"reference/quick-reference/#how-it-works","title":"How It Works","text":""},{"location":"reference/quick-reference/#input-rules","title":"Input Rules","text":"<ol> <li>Multi-line: Use Shift+Enter to continue, Enter to submit</li> <li>Comments: Lines starting with <code>#</code> are ignored</li> <li>Blanks: Empty lines are skipped</li> <li>Execution: Commands run sequentially, each with full error handling</li> </ol>"},{"location":"reference/quick-reference/#parsing","title":"Parsing","text":"<pre><code>Raw Input:\n\"# Setup\ncreate-custom\nset-name --name Role\n\nView\"\n\n\u2193 parse_multiline_commands()\n\nResult:\n[\"create-custom\", \"set-name --name Role\", \"View\"]\n</code></pre>"},{"location":"reference/quick-reference/#backward-compatibility","title":"Backward Compatibility","text":"<p>\u2705 100% backwards compatible - Single-line input works exactly as before - No changes to command syntax - All existing features unchanged - No performance impact</p>"},{"location":"reference/quick-reference/#usage-in-cicd","title":"Usage in CI/CD","text":"<p>Perfect for automation:</p> <pre><code># Create a script file\ncat &gt; create_role.cli &lt;&lt; 'EOF'\n# Create and configure role\ncreate-custom\nset-name --name AutomationRole\nset-description --description \"Automated role setup\"\nset-scopes /subscriptions/prod-sub\nsave\npublish --subscription-id prod-sub\nEOF\n\n# Execute (future enhancement - not yet implemented)\n# custom-role-designer console &lt; create_role.cli\n</code></pre>"},{"location":"reference/quick-reference/#troubleshooting","title":"Troubleshooting","text":"Issue Solution Commands not executing Check for syntax errors in earlier commands Comments not ignored Ensure <code>#</code> is at line start (after whitespace) Copy-paste not working Use Shift+Enter between lines, or try pasting one line at a time Terminal issues Some terminals may need special multi-line handling"},{"location":"reference/quick-reference/#documentation","title":"Documentation","text":""},{"location":"reference/quick-reference/#full-guides","title":"Full Guides","text":"<ul> <li>MULTILINE_SCRIPT_FEATURE.md - Complete feature documentation</li> <li>MULTILINE_SCRIPT_IMPLEMENTATION.md - Implementation details</li> </ul>"},{"location":"reference/quick-reference/#related-features","title":"Related Features","text":"<ul> <li>UNIFIED_LOAD_FEATURE.md - Load from file/local/Azure with fallback</li> <li>ROLE_PROPERTIES_FEATURE.md - Set name, description, scopes</li> <li>FEATURE_REFERENCE.md - All commands reference</li> </ul>"},{"location":"reference/quick-reference/#performance","title":"Performance","text":"<ul> <li>\u26a1 Fast parsing: O(n) time complexity</li> <li>\ud83c\udfaf Minimal memory: No buffering overhead</li> <li>\ud83d\udcca No slowdown: Single-line mode unchanged</li> <li>\ud83d\udd04 Efficient execution: Sequential processing</li> </ul>"},{"location":"reference/quick-reference/#test-coverage","title":"Test Coverage","text":"<p>18 new tests cover:</p> <pre><code>Parsing Tests (15)\n\u251c\u2500\u2500 Single/multiple commands\n\u251c\u2500\u2500 Arguments &amp; special characters\n\u251c\u2500\u2500 Comment filtering (5 tests)\n\u251c\u2500\u2500 Blank line handling (3 tests)\n\u2514\u2500\u2500 Edge cases (7 tests)\n\nWorkflow Tests (3)\n\u251c\u2500\u2500 Role creation workflow\n\u251c\u2500\u2500 Merge &amp; modify workflow\n\u2514\u2500\u2500 Complex annotated workflow\n</code></pre>"},{"location":"reference/quick-reference/#next-steps","title":"Next Steps","text":"<p>Planned enhancements: - Load scripts from files (<code>load-script /path/to/script.cli</code>) - Conditional execution (if/then/else) - Variable substitution - Loop constructs - Error recovery strategies</p> <p>Status: \u2705 Production Ready | Tests: 126/126 Passing</p>"}]}